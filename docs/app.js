webpackJsonp([0],[function(t,e,r){"use strict";(function(t){function n(t,e){var r=t.size;if(r!==e.size)return!1;for(var n=t.values(),a=n.next();!a.done;a=n.next())if(!e.has(a.value))return!1;return!0}function a(t,e){var r=new Set;return t.forEach(function(t){e.has(t)&&r.add(t)}),r}function o(t,e){var r=t.indexOf(e);r<0||(t[r]=B.last(t),t.pop())}function i(t){for(var e=t.toString(),r=e.length%3,n=r>0?[e.slice(0,r)]:[],a=e.length%3;a<e.length;a+=3)n.push(e.substr(a,3));return n.join("'")}function s(t,e){return S.point(+t.x.toFixed(e),+t.y.toFixed(e))}function l(t,e){return void 0===e&&(e=10),t.toString(e).split(".")[1]||"0"}function u(t){var e=Math.random().toString(36).slice(2);return t&&t(e)?u(t):e}function c(t,e){var r=t.getContainer().getBoundingClientRect(),n=S.point(e.clientX-r.left,e.clientY-r.top);return t.containerPointToLatLng(n)}function f(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return t?t.apply(void 0,e):void 0}function d(t){function e(){removeEventListener("keydown",r),removeEventListener("backbutton",n)}var r=function(r){27===r.keyCode&&(e(),t(r))},n=function(r){e(),t(r)};addEventListener("keydown",r),addEventListener("backbutton",n)}function p(){for(var t=document.querySelectorAll(V),e=0,r=t;e<r.length;e++){var n=r[e];n.style.opacity=null,"t"!==n.id[1]&&(n.style.filter=null)}}function m(t,e){var r=document.createEvent("MouseEvents");r.initEvent(e,!0,!0),t.dispatchEvent(r)}function h(t){var e=t.name,r=t.altNames,n=M(),a=[e];return n&&r[n]&&a.push(r[n]),r.en&&a.push(r.en),a}function g(t){var e=t.map(h);return[0,1,2].map(function(r){return t.map(function(t,n){return e[n][r]})}).map(function(t){return B.uniq(t).reduce(function(t,e){return t+" / "+e})}).filter(function(t){return void 0!==t})}function y(t,e){var r=e.map(function(e){return t.distanceTo(e)}),n=e[1].subtract(e[0]).multiplyBy(r[0]/(r[0]+r[1])).add(e[0]),a=t.subtract(n);return e.map(function(t){return s(t.add(a),2)})}function v(t){var e=t.style,r=e.transform;r&&(e.transform=r.replace(/translate3d\s*\((.+?,\s*.+?),\s*.+?\s*\)/i,"translate($1)"))}function b(t,e){var r=0;setInterval(function(){return document.title=t[++r%t.length]},e)}function w(t,e,r){var n=t.getBoundingClientRect();if(!r){var a=document.documentElement;r=S.point(a.clientWidth/2,a.clientHeight/2)}var o=S.point(r.x-n.left,r.y-n.top),i=S.point(o.x/n.width,o.y/n.height),s=t.style;s.transformOrigin=100*i.x+"% "+100*i.y+"%",s.transform="scale("+e+")"}function x(t,r,n,a){return void 0===n&&(n=100),void 0===a&&(a=100),C(this,void 0,void 0,function(){var o,i;return _(this,function(s){switch(s.label){case 0:o=0,s.label=1;case 1:return o<a?(i=t(),!r||r(i)?[2,i]:[4,e.delay(n)]):[3,4];case 2:s.sent(),s.label=3;case 3:return++o,[3,1];case 4:throw new Error("rejected")}})})}function A(t,e,r){void 0===e&&(e=100),void 0===r&&(r=100);var n=t.slice(1),a="#"===t[0]?function(){return document.getElementById(n)}:function(){return document.querySelector(t)};return x(a,function(t){return null!==t},e,r)}function k(t){for(var e;e=t.firstChild;)t.removeChild(e)}function j(t){void 0===t&&(t=document);var e=t.querySelectorAll('[style*="translate3d"]');console.log("fixing font",t,e);for(var r=0,n=e;r<n.length;r++){var a=n[r];v(a)}}function M(){var t=location.search.match(/city=(\w+)/),e=t?t[1]:"spb",r={spb:"fi",qazan:"tt",helsinki:"se"};return r[e]}function E(t,e){var r=t.get(e);if(void 0===r)throw console.error("in map",t,":",e,"->",r),new Error("key or val is undefined");return r}function L(t){var e=document.getElementById(t);if(!e)throw new Error("no element with id="+t+" exists");return e}var C=this&&this.__awaiter||function(e,r,n,a){return new(n||(n=t))(function(t,o){function i(t){try{l(a.next(t))}catch(t){o(t)}}function s(t){try{l(a.throw(t))}catch(t){o(t)}}function l(e){e.done?t(e.value):new n(function(t){t(e.value)}).then(i,s)}l((a=a.apply(e,r||[])).next())})},_=this&&this.__generator||function(t,e){function r(t){return function(e){return n([t,e])}}function n(r){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[0,i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],o=0}finally{a=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return{next:r(0),throw:r(1),return:r(2)}},S=r(1),B=r(3),T=r(43);e.algorithm=T;var z=r(45);e.decorators=z;var O=r(10);e.geo=O;var F=r(11);e.math=F;var N=r(42);e.Mediator=N.default;var P=r(47);e.sfx=P;var R=r(12);e.svg=R;var I=r(46);e.file=I;var G=r(44);e.color=G;var V=["paths-inner","paths-outer","transfers-inner","transfers-outer","station-circles"].map(function(t){return"#"+t+" > *"}).join(", ");e.setsEqual=n,e.intersection=a,e.deleteFromArray=o,e.formatInteger=i,e.roundPoint=s,e.getFraction=l,e.generateId=u,e.mouseToLatLng=c,e.callMeMaybe=f,e.once=function(e,r){return new t(function(t){e.addEventListener(r,function n(a){e.removeEventListener(r,n),t(a)})})},e.onceEscapePress=d,e.transitionEnd=function(t){return e.once(t,"transitionend")},e.resetStyle=p,e.triggerMouseEvent=m,e.getPlatformNames=h,e.getPlatformNamesZipped=g,e.midPointsToEnds=y,e.trim3d=v,e.flashTitle=b,e.scaleOverlay=w,e.delay=function(e){return new t(function(t,r){return setTimeout(t,e)})},e.tryGet=x,e.tryGetElement=A,e.removeAllChildren=k,e.fixFontRendering=j,e.getSecondLanguage=M,e.tryGetFromMap=E,e.byId=L}).call(e,r(2))},,,,function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var r=this[e];r[2]?t.push("@media "+r[2]+"{"+r[1]+"}"):t.push(r[1])}return t.join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},a=0;a<this.length;a++){var o=this[a][0];"number"==typeof o&&(n[o]=!0)}for(a=0;a<e.length;a++){var i=e[a];"number"==typeof i[0]&&n[i[0]]||(r&&!i[2]?i[2]=r:r&&(i[2]="("+i[2]+") and ("+r+")"),t.push(i))}},t}},function(t,e){function r(t,e){for(var r=0;r<t.length;r++){var n=t[r],a=d[n.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](n.parts[o]);for(;o<n.parts.length;o++)a.parts.push(l(n.parts[o],e))}else{for(var i=[],o=0;o<n.parts.length;o++)i.push(l(n.parts[o],e));d[n.id]={id:n.id,refs:1,parts:i}}}}function n(t){for(var e=[],r={},n=0;n<t.length;n++){var a=t[n],o=a[0],i=a[1],s=a[2],l=a[3],u={css:i,media:s,sourceMap:l};r[o]?r[o].parts.push(u):e.push(r[o]={id:o,parts:[u]})}return e}function a(t,e){var r=h(),n=v[v.length-1];if("top"===t.insertAt)n?n.nextSibling?r.insertBefore(e,n.nextSibling):r.appendChild(e):r.insertBefore(e,r.firstChild),v.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");r.appendChild(e)}}function o(t){t.parentNode.removeChild(t);var e=v.indexOf(t);e>=0&&v.splice(e,1)}function i(t){var e=document.createElement("style");return e.type="text/css",a(t,e),e}function s(t){var e=document.createElement("link");return e.rel="stylesheet",a(t,e),e}function l(t,e){var r,n,a;if(e.singleton){var l=y++;r=g||(g=i(e)),n=u.bind(null,r,l,!1),a=u.bind(null,r,l,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=s(e),n=f.bind(null,r),a=function(){o(r),r.href&&URL.revokeObjectURL(r.href)}):(r=i(e),n=c.bind(null,r),a=function(){o(r)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else a()}}function u(t,e,r,n){var a=r?"":n.css;if(t.styleSheet)t.styleSheet.cssText=b(e,a);else{var o=document.createTextNode(a),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(o,i[e]):t.appendChild(o)}}function c(t,e){var r=e.css,n=e.media;if(n&&t.setAttribute("media",n),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}function f(t,e){var r=e.css,n=e.sourceMap;n&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var a=new Blob([r],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(a),o&&URL.revokeObjectURL(o)}var d={},p=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},m=p(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),h=p(function(){return document.head||document.getElementsByTagName("head")[0]}),g=null,y=0,v=[];t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");e=e||{},"undefined"==typeof e.singleton&&(e.singleton=m()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var a=n(t);return r(a,e),function(t){for(var o=[],i=0;i<a.length;i++){var s=a[i],l=d[s.id];l.refs--,o.push(l)}if(t){var u=n(t);r(u,e)}for(var i=0;i<o.length;i++){var l=o[i];if(0===l.refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete d[l.id]}}}};var b=function(){var t=[];return function(e,r){return t[e]=r,t.filter(Boolean).join("\n")}}()},function(t,e,r){"use strict";(function(t){function n(t){return l(this,void 0,void 0,function(){var r,n,a,o,i,s;return u(this,function(l){switch(l.label){case 0:return[4,c.getJSON(t)];case 1:for(r=l.sent(),n=Object.keys(r),a=0,o=n;a<o.length;a++)i=o[a],s=r[i],f.set(i.toLowerCase(),e.userLanguage in s?s[e.userLanguage]:i);return d=new RegExp(n.join("|"),"ig"),[2]}})})}function a(t){var e=f.get(t.toLowerCase());return void 0===e?t:t.toUpperCase()===t?e.toUpperCase():e}function o(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return t.map(function(t){return t.replace(d,a)}).map(function(t,r){return t+(e[r]||"")}).join("")}function i(t,r){return 0===t?"":""+t+(t>1&&"en"===e.userLanguage?r+"s":r)}function s(t){if(void 0===t)return"";if(t<60)return Math.round(t)+" seconds";if(t<3570){var e=Math.round(t/60);return i(e,"min")}var r=Math.floor(t/3600),n=Math.floor((t-3600*r)/60);return(r>0?r+(a=["%hour%"],a.raw=["%hour%"],o(a)):"")+" "+i(n,"min");var a}var l=this&&this.__awaiter||function(e,r,n,a){return new(n||(n=t))(function(t,o){function i(t){try{l(a.next(t))}catch(t){o(t)}}function s(t){try{l(a.throw(t))}catch(t){o(t)}}function l(e){e.done?t(e.value):new n(function(t){t(e.value)}).then(i,s)}l((a=a.apply(e,r||[])).next())})},u=this&&this.__generator||function(t,e){function r(t){return function(e){return n([t,e])}}function n(r){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[0,i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],o=0}finally{a=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return{next:r(0),throw:r(1),return:r(2)}},c=r(7);e.userLanguage=navigator.language.slice(0,2).toLowerCase();var f=new Map,d=new RegExp(Object.keys(f).join("|"),"ig");e.updateDictionary=n,e.translate=a,e.tr=o,e.formatTime=s}).call(e,r(2))},function(t,e,r){"use strict";(function(t,n){function a(){for(var t="",e=0,r=document.styleSheets;e<r.length;e++){var n=r[e];console.log(n.cssText);var a=n.cssRules;if(a)for(var o=0,i=a;o<i.length;o++){var s=i[o];t+=s.cssText}else console.log(n)}return console.log("css text ready"),t}function o(){return i(this,void 0,void 0,function(){var t,e,r,n,a,o,i,u,c,f;return s(this,function(s){switch(s.label){case 0:return t=document.getElementById("scheme"),[4,l.tryGet(function(){return t.sheet},function(t){return null!==t})];case 1:for(e=s.sent(),r=new Map,n=0,a=e.cssRules;n<a.length;n++)if(o=a[n],o instanceof CSSStyleRule)for(i=0,u=o.selectorText.split(",").map(function(t){return t.trim()});i<u.length;i++)c=u[i],f=c.match(/^.(M\d+|L|E)$/),f&&f[1]?r.set(f[1],o.style):"#paths-outer > .L"===c&&r.set("light-rail-path",o.style);return console.log(r),[2,r]}})})}var i=this&&this.__awaiter||function(e,r,n,a){return new(n||(n=t))(function(t,o){function i(t){try{l(a.next(t))}catch(t){o(t)}}function s(t){try{l(a.throw(t))}catch(t){o(t)}}function l(e){e.done?t(e.value):new n(function(t){t(e.value)}).then(i,s)}l((a=a.apply(e,r||[])).next())})},s=this&&this.__generator||function(t,e){function r(t){return function(e){return n([t,e])}}function n(r){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[0,i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],o=0}finally{a=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return{next:r(0),throw:r(1),return:r(2)}},l=r(0);e.getJSON=function(t){return n(t).then(function(t){return t.json()})},e.getContent=function(t){return n(t).then(function(t){return t.text()})},e.getConfig=function(){return n("res/mapconfig.json").then(function(t){return t.json()})},e.getStyleRulesAsText=a,e.getLineRules=o}).call(e,r(2),r(20))},,function(t,e,r){"use strict";var n=function(){function t(t,e){if(t===e)throw new Error("source is the same as target: "+t);this._source=t,this._target=e}return Object.defineProperty(t.prototype,"source",{get:function(){return this._source},set:function(t){this._source=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this._target},set:function(t){this._target=t},enumerable:!0,configurable:!0}),t.prototype.isOf=function(t,e){return this._source===t&&this._target===e||this._source===e&&this._target===t},t.prototype.has=function(t){return this._source===t||this._target===t},t.prototype.other=function(t){if(this._source===t)return this._target;if(this._target===t)return this._source;throw new Error("span does not have vertex")},t.prototype.isAdjacent=function(t){return this.has(t._source)||this.has(t._target)},t.prototype.invert=function(){t=[this._target,this._source],this._source=t[0],this._target=t[1];var t},t}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e,r){"use strict";function n(t,e){var r=e.length;if(r<1)throw new Error("an objects array must contain at least 1 object");for(var n=e[0],a=t.distanceTo(n.location||n),o=1;o<r;++o){var i=e[o],s=t.distanceTo(i.location||i);s<a&&(n=i,a=s)}return n}function a(t,e,r,n){void 0===n&&(n=!1);var a=e.map(function(e){return{item:e,distance:t.distanceTo(e.location)}}).filter(function(t){return t.distance<=r});return(n?a.sort(function(t,e){return t.distance-e.distance}):a).map(function(t){return t.item})}function o(t){for(var e=0,r=0,n=0,a=t;n<a.length;n++){var o=a[n],i=o.lat,l=o.lng;e+=i,r+=l}return s.latLng(e/t.length,r/t.length)}function i(t,e,r,n){void 0===r&&(r=1e-5);var a=o(t),i=e(a);l.callMeMaybe(n,a);for(var u=10;u>r;u*=.61803398875)for(var c=u,f=-c;f<=c;f+=u)for(var d=-c;d<=c;d+=u){var p=s.latLng(a.lat+f,a.lng+d),m=e(p);m<i&&(a=p,i=m,l.callMeMaybe(n,a))}return a}var s=r(1),l=r(0);e.findClosestObject=n,e.findObjectsWithinRadius=a,e.getCenter=o,e.calculateGeoMean=i},function(t,e,r){"use strict";function n(t){return Math.abs(t.x)<Number.EPSILON||Math.abs(t.y)<Number.EPSILON}function a(t,e){return t.x*e.x+t.y*e.y}function o(t,e){return t.x*e.y-e.x*t.y}function i(t){return t.divideBy(Math.sqrt(a(t,t)))}function s(t,e){var r=i(t),a=i(e),o=r.add(a);return n(o)?g.point(0,0):i(o)}function l(t,e){var r=e.subtract(t);return[g.point(r.y,-r.x),g.point(-r.y,r.x)]}function u(t,e,r,n){void 0===n&&(n=1);var a=t.subtract(e),i=r.subtract(e),u=s(a,i),c=o(a,i)<0?-n:n;return l(e,u.multiplyBy(c).add(e))}function c(t,e){return a(t,e)/t.distanceTo(e)}function f(t){return t.reduce(function(t,e){return t.add(e)}).divideBy(t.length)}function d(t){if(3!==t.length)throw new Error("must have 3 vertices");var e=t[0],r=t[1].subtract(e),n=t[2].subtract(e),o=a(r,r),i=a(n,n);return g.point(n.y*o-r.y*i,r.x*i-n.x*o).divideBy(2*(r.x*n.y-r.y*n.x)).add(e)}function p(t,e,r){return g.point(t.x+e*Math.cos(r),t.y+e*Math.sin(r))}function m(t){var e=Math.abs(t.x),r=Math.abs(t.y);return t.divideBy(e<r?r:e)}function h(t,e,r){var n=e*e/r;return n<t?e/r*2+(t-n)/e:2*Math.sqrt(t/r)}var g=r(1);e.isArbitrarilySmall=n,e.dot=a,e.det=o,e.normalize=i,e.bisect=s,e.orthogonal=l,e.wings=u,e.angle=c,e.mean=f,e.getCircumcenter=d,e.polarToCartesian=p,e.vectorToGradCoordinates=m,e.timeToTravel=h},function(t,e,r){"use strict";function n(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function a(t,e){var r=n("circle");return r.setAttribute("r",e.toString()),r.setAttribute("cy",t.y.toString()),r.setAttribute("cx",t.x.toString()),r}function o(t,e){var r=n("line");return r.setAttribute("x1",t.x.toString()),r.setAttribute("y1",t.y.toString()),r.setAttribute("x2",e.x.toString()),r.setAttribute("y2",e.y.toString()),r}function i(t,e,r){var a=n("path");return c(a,t,e,r),a}function s(t){var e=[],r=/\D([\d\.]+).*?,.*?([\d\.]+)/g,n=t.getAttribute("d");if(n){for(var a;null!==(a=r.exec(n));)e.push(y.point(Number(a[1]),Number(a[2])));return e}}function l(t,e){if(4!==e.length)throw new Error("there should be 4 points");var r=["M"].concat(e.map(function(t){return t.x+","+t.y}));r.splice(2,0,"C"),t.setAttribute("d",r.join(" "))}function u(t){var e=[],r=/\D([\d\.]+)/g,n=t.getAttribute("d");if(n){for(var a;null!==(a=r.exec(n));)e.push(Number(a[1]));return e}}function c(t,e,r,n){var a=v.getCircumcenter([e,r,n]),o=Math.atan2(e.y-a.y,e.x-a.x),i=Math.atan2(r.y-a.y,r.x-a.x),s=i-o,l=s<=Math.PI||s>-Math.PI?0:1,u=e.subtract(a),c=r.subtract(a),f=v.det(u,c)<0?0:1,d=v.dot(n.subtract(e),n.subtract(r));d<0&&(f=1-f,l=1-l);var p=a.distanceTo(e),m=["M",e.x,e.y,"A",p,p,0,l,f,r.x,r.y].join(" ");t.setAttribute("d",m)}function f(t){var e=n("path");return l(e,t),e}function d(t,e){var r=a(t,e),n=r.cloneNode(!0);return[r,n]}function p(t,e,r){var n=i(t,e,r),a=n.cloneNode(!0);return[n,a]}function m(t,e){var r=e.clone();return t.x===e.x?r.x+=.01:t.y===e.y&&(r.y+=.01),[o(t,r),o(t,r)]}function h(t){var e=y.point(+t.getAttribute("cx"),+t.getAttribute("cy")),r=~~t.getAttribute("r"),n=y.point(0+r,4+r);return e.subtract(n)}function g(t){if(t instanceof SVGPathElement)return t.getTotalLength();var e=y.point(+t.getAttribute("x1"),+t.getAttribute("y1")),r=y.point(+t.getAttribute("x2"),+t.getAttribute("y2"));return e.distanceTo(r)}var y=r(1),v=r(11);e.createSVGElement=n,e.makeCircle=a,e.makeLine=o,e.makeArc=i,e.getBezierPathPoints=s,e.setBezierPath=l,e.getCircularPath=u,e.setCircularPath=c,e.makeCubicBezier=f,e.makeTransferRing=d,e.makeTransferArc=p,e.makeTransferLine=m,e.circleOffset=h,e.getLength=g;var b;!function(t){function e(){var t=n("filter");return t.id="shadow",t.setAttribute("width","200%"),t.setAttribute("height","200%"),t.innerHTML='\n            <feOffset result="offOut" in="SourceAlpha" dx="0" dy="4" />\n            <feColorMatrix result="matrixOut" in="offOut" type="matrix" values=\n                "0 0 0 0   0\n                0 0 0 0   0\n                0 0 0 0   0\n                0 0 0 0.5 0"/>\n            <feGaussianBlur result="blurOut" in="matrixOut" stdDeviation="2" />\n\n            <feBlend in="SourceGraphic" in2="blurOut" mode="normal" />\n        ',t}function r(){var t=n("filter");return t.id="black-glow",t.innerHTML='<feColorMatrix type="matrix" values=\n                "0 0 0 0   0\n                0 0 0 0   0\n                0 0 0 0   0\n                0 0 0 0.3 0"/>\n            <feGaussianBlur stdDeviation="2.5" result="coloredBlur"/>\n            <feMerge>\n                <feMergeNode in="coloredBlur"/>\n                <feMergeNode in="SourceGraphic"/>\n            </feMerge>',t}function a(){var t=n("filter");return t.id="opacity",t.innerHTML='<feComponentTransfer>\n            <feFuncA type="table" tableValues="0 0.5">\n        </feComponentTransfer>',t}function o(){var t=n("filter");return t.id="gray",t.innerHTML='<feColorMatrix type="matrix"\n               values="0.2126 0.7152 0.0722 0 0\n                       0.2126 0.7152 0.0722 0 0\n                       0.2126 0.7152 0.0722 0 0\n                       0 0 0 1 0"/>',t}function i(t){t.appendChild(e()),t.appendChild(r()),t.appendChild(a()),t.appendChild(o())}function s(t){var e=t.getBoundingClientRect(),r=getComputedStyle(t),n=2*parseFloat(r.strokeWidth||t.style.strokeWidth||"0");e.height>=n&&e.width>=n&&(t.style.filter="url(#black-glow)")}t.makeDrop=e,t.makeGlow=r,t.makeOpacity=a,t.makeGray=o,t.appendAll=i,t.applyDrop=s}(b=e.Filters||(e.Filters={}));var w;!function(t){function e(t){var e=n("linearGradient");if("innerHTML"in e)return e.innerHTML='<stop style="stop-color:'+t[0]+'" /><stop style="stop-color:'+t[1]+'" />',e;var r=n("stop");r.style.stopColor=t[0];var a=n("stop");return a.style.stopColor=t[1],e.appendChild(r),e.appendChild(a),e}function r(t,r,n){void 0===n&&(n=0);var i=e(r);return o(i,n),a(i,t),i}function a(t,e){var r="rotate("+180*Math.atan2(e.y,e.x)/Math.PI+", 0.5, 0.5)";t.setAttribute("gradientTransform",r)}function o(t,e){t.firstChild.setAttribute("offset",e.toString()),t.lastChild.setAttribute("offset",(1-e).toString())}t.makeUndirectedLinear=e,t.makeLinear=r,t.setDirection=a,t.setOffset=o}(w=e.Gradients||(e.Gradients={}))},,,,function(t,e,r){"use strict";var n=r(14),a={platformBindings:new WeakMap,dummyBindings:new n.WeakBiMap,outerEdgeBindings:new n.WeakBiMap,innerEdgeBindings:new n.WeakBiMap,gradientBindings:new WeakMap};Object.defineProperty(e,"__esModule",{value:!0}),e.default=Object.freeze(a)},function(t,e,r){"use strict";var n=r(1),a=r(0),o=r(27);e.Platform=o.default;var i=r(29);e.Station=i.default;var s=r(9);e.Edge=s.default;var l=r(28);e.Span=l.default;var u=r(30);e.Transfer=u.default;var c=function(){function t(t){var e=this,r=function(t){return n.latLng(t.lat,t.lng)};this.platforms=t.platforms.map(function(t){return new o.default(t.name,r(t.location),t.altNames)}),this.stations=[],this.routes=t.routes,this.lines=t.lines,this.transfers=t.transfers.map(function(t){return new u.default(e.platforms[t.source],e.platforms[t.target])});var a=function(t){return t.routes.map(function(t){return e.routes[t]})};this.spans=t.spans.map(function(t){return new l.default(e.platforms[t.source],e.platforms[t.target],a(t))}),console.time("restore");for(var s=new Set(this.transfers),c=new Set(this.platforms);s.size>0;){var f=s.values().next().value,d=(new Set).add(f.source).add(f.target);s.delete(f);for(var p=d.values(),m=p.next().value;void 0!==m;m=p.next().value){for(var h=new Set,g=s.values(),y=g.next().value;void 0!==y;y=g.next().value)y.source===m?(d.add(y.target),h.add(y)):y.target===m&&(d.add(y.source),h.add(y));h.forEach(function(t){return s.delete(t)}),c.delete(m)}var v=new i.default(Array.from(d));this.stations.push(v)}c.forEach(function(t){return e.stations.push(new i.default([t]))}),console.timeEnd("restore")}return t.prototype.toJSON=function(){var t=this;return JSON.stringify({platforms:this.platforms.map(function(t){return{name:t.name,altNames:t.altNames,location:t.location}}),transfers:this.transfers.map(function(e){return{source:t.platforms.indexOf(e.source),target:t.platforms.indexOf(e.target)}}),lines:this.lines,spans:this.spans.map(function(e){return{source:t.platforms.indexOf(e.source),target:t.platforms.indexOf(e.target),routes:e.routes.map(function(e){return t.routes.indexOf(e)})}}),routes:this.routes},function(t,e){return t.startsWith("_")?void 0:e})},t.prototype.deletePlatform=function(t){console.log("removing platform",t);for(var e=0,r=t.transfers;e<r.length;e++){var n=r[e];a.deleteFromArray(this.transfers,n)}if(t.transfers.length=0,1===t.spans.length){var o=t.spans[0],i=o.other(t);a.deleteFromArray(i.spans,o),a.deleteFromArray(this.spans,o)}else if(2===t.spans.length){var s=t.spans,l=s[0],u=s[1],c=u.other(t);if(!c)throw new Error("span does not have other end");if(2===t.passingRoutes().size){var f=l.other(t);a.deleteFromArray(f.spans,l),a.deleteFromArray(this.spans,l)}else l.source===t?l.source=c:l.target=c;a.deleteFromArray(c.spans,u),a.deleteFromArray(this.spans,u)}else for(var d=0,p=t.spans;d<p.length;d++){var o=p[d],i=o.other(t);a.deleteFromArray(i.spans,o),a.deleteFromArray(this.spans,o)}var m=t.station;1===m.platforms.length?a.deleteFromArray(this.stations,m):a.deleteFromArray(m.platforms,t),a.deleteFromArray(this.platforms,t)},t}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=c},function(t,e,r){"use strict";var n=r(34);e.RedCircle=n.default,e.start=L.icon({iconUrl:"https://proxy-antonv.rhcloud.com/?url=http://map.project-osrm.org/images/marker-start-icon-2x.png",iconSize:[20,56],iconAnchor:[10,28]}),e.end=L.icon({iconUrl:"https://proxy-antonv.rhcloud.com/?url=http://map.project-osrm.org/images/marker-end-icon-2x.png",iconSize:[20,56],iconAnchor:[10,28]}),e.red=L.icon({iconUrl:"https://proxy-antonv.rhcloud.com/?url=http://harrywood.co.uk/maps/examples/leaflet/marker-icon-red.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowUrl:"https://proxy-antonv.rhcloud.com/?url=http://cdn.leafletjs.com/leaflet/v0.7.7/images/marker-shadow.png",shadowRetinaUrl:"marker-shadow-@2x.png",shadowSize:[41,41],shadowAnchor:[12,41]})},function(t,e,r){"use strict";function n(t,e){var r=f.getSecondLanguage(),n=t.altNames;r?(t.name=e[0],n[r]=e[1],n.en=e[2]):(t.name=e[0],n.en=e[1])}function a(t){var e=t.name,r=t.altNames,a=r.fi,o=r.en,i=o?[e,a,o]:a?[e,a]:[e],s=i.join("|");c.prompt((l=["New name"],l.raw=["New name"],p.tr(l)),s,function(r,a){var o=a.split("|");if(n(t,o),a===s)return c.warning((d=["Name was not changed"],d.raw=["Name was not changed"],p.tr(d)));var l=i.slice(1).join(", "),u=o.slice(1).join(", ");c.success((m=[""," (",") renamed to "," (",")"],m.raw=[""," (",") renamed to "," (",")"],p.tr(m,e,l,o[0],u)));var f=t.station;if(!(f.platforms.length<2)){c.confirm((h=["Rename the entire station?"],h.raw=["Rename the entire station?"],p.tr(h)),function(){for(var t=0,e=f.platforms;t<e.length;t++){var r=e[t];n(r,o)}c.success((i=["The entire station was renamed to ",""],i.raw=["The entire station was renamed to ",""],p.tr(i,a)));var i});var d,m,h}},function(){return c.warning((t=["Name change cancelled"],t.raw=["Name change cancelled"],p.tr(t)));var t});var l}function o(t,e){for(var r=void 0===e?void 0:Array.from(e).map(function(t){return t.line+t.branch}).join("|"),n=new Set,a=prompt("routes",r)||"",o=function(e){var r="M"===e[0]?e.match(/(M\d{0,2})(\w?)/):e.match(/([EL])(.{0,2})/);if(!r)return console.error("incorrect route",e),"continue";var a=r[1],o=r[2],i=t.routes.find(function(t){return t.line===a&&t.branch===o});void 0===i&&(console.log("creating new route"),i={line:a,branch:o},t.routes.push(i)),n.add(i)},i=0,s=a.split("|");i<s.length;i++){var l=s[i];o(l)}return n}function i(t,e){var r=0;addEventListener("keydown",function(n){n.shiftKey&&n.ctrlKey&&76===n.keyCode&&(n.preventDefault(),t.removeLayer(e[r]),++r===e.length&&(r=0),t.addLayer(e[r]),t.invalidateSize(!1))})}function s(t,e){var r=e.filter(function(t){return t.spans[0].routes[0].line.startsWith("M")}).map(function(t){return t.location}),n=function(t){return r.reduce(function(e,r){return e+t.distanceTo(r)},0)},a=u.polyline([],{color:"red"}),o=d.calculateGeoMean(r,n,1,function(t){return a.addLatLng(t)});t.addLayer(a);for(var i=5e3;i<2e4;i+=5e3)u.circle(o,i-250,{weight:1}).addTo(t),u.circle(o,i+250,{weight:1}).addTo(t);var s=(e.filter(function(t){return t.spans[0].routes[0].line.startsWith("E")}).map(function(t){return t.location}),"Glavnyj voxal"),l=e.find(function(t){return t.name===s&&t.spans[0].routes[0].line.startsWith("E")});if(l){var c=l.location;u.circle(c,3e4).addTo(t),u.circle(c,45e3).addTo(t)}}function l(t,e){for(var r=0,n=e;r<n.length;r++){var a=n[r];t.addLayer(a).removeLayer(a)}}var u=r(1),c=r(8),f=r(0),d=r(10),p=r(6),m=r(35);e.MapEditor=m.default;var h=r(33);e.FAQ=h.default;var g=r(38);e.TextPlate=g.default;var y=r(36);e.RoutePlanner=y.default;var v=r(31);e.ContextMenu=v.default;var b=r(32);e.DistanceMeasure=b.default;var w=r(37);e.SvgOverlay=w.default;var x=r(18);e.Icons=x;var A=r(41);e.tileLayers=A,e.platformRenameDialog=a,e.askRoutes=o,e.addLayerSwitcher=i,e.drawZones=s,e.cacheIcons=l},function(t,e,r){(function(e,r){(function(){!function(t){"use strict";function r(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=String(t)),t}function a(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return v.iterable&&(e[Symbol.iterator]=function(){return e}),e}function o(t){this.map={},t instanceof o?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function i(t){return t.bodyUsed?e.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function s(t){return new e(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function l(t){var e=new FileReader,r=s(e);return e.readAsArrayBuffer(t),r}function u(t){var e=new FileReader,r=s(e);return e.readAsText(t),r}function c(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}function f(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(v.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(v.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(v.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(v.arrayBuffer&&v.blob&&w(t))this._bodyArrayBuffer=f(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!v.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!x(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=f(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob&&(this.blob=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return e.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return e.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return e.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||e.resolve(this._bodyArrayBuffer):this.blob().then(l);
}),this.text=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return e.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return e.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(t){var e=t.toUpperCase();return A.indexOf(e)>-1?e:t}function m(t,e){e=e||{};var r=e.body;if(t instanceof m){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new o(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new o(e.headers)),this.method=p(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function h(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),a=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(a))}}),e}function g(t){var e=new o;return t.split(/\r?\n/).forEach(function(t){var r=t.split(":"),n=r.shift().trim();if(n){var a=r.join(":").trim();e.append(n,a)}}),e}function y(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new o(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var v={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(v.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],w=function(t){return t&&DataView.prototype.isPrototypeOf(t)},x=ArrayBuffer.isView||function(t){return t&&b.indexOf(Object.prototype.toString.call(t))>-1};o.prototype.append=function(t,e){t=r(t),e=n(e);var a=this.map[t];this.map[t]=a?a+","+e:e},o.prototype.delete=function(t){delete this.map[r(t)]},o.prototype.get=function(t){return t=r(t),this.has(t)?this.map[t]:null},o.prototype.has=function(t){return this.map.hasOwnProperty(r(t))},o.prototype.set=function(t,e){this.map[r(t)]=n(e)},o.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},o.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),a(t)},o.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),a(t)},o.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),a(t)},v.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var A=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},d.call(m.prototype),d.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},y.error=function(){var t=new y(null,{status:0,statusText:""});return t.type="error",t};var k=[301,302,303,307,308];y.redirect=function(t,e){if(k.indexOf(e)===-1)throw new RangeError("Invalid status code");return new y(null,{status:e,headers:{location:t}})},t.Headers=o,t.Request=m,t.Response=y,t.fetch=function(t,r){return new e(function(e,n){var a=new m(t,r),o=new XMLHttpRequest;o.onload=function(){var t={status:o.status,statusText:o.statusText,headers:g(o.getAllResponseHeaders()||"")};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL");var r="response"in o?o.response:o.responseText;e(new y(r,t))},o.onerror=function(){n(new TypeError("Network request failed"))},o.ontimeout=function(){n(new TypeError("Network request failed"))},o.open(a.method,a.url,!0),"include"===a.credentials&&(o.withCredentials=!0),"responseType"in o&&v.blob&&(o.responseType="blob"),a.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send("undefined"==typeof a._bodyInit?null:a._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this),t.exports=r.fetch}).call(r)}).call(e,r(2),r(13))},function(t,e,r){"use strict";(function(t){var n=this&&this.__awaiter||function(e,r,n,a){return new(n||(n=t))(function(t,o){function i(t){try{l(a.next(t))}catch(t){o(t)}}function s(t){try{l(a.throw(t))}catch(t){o(t)}}function l(e){e.done?t(e.value):new n(function(t){t(e.value)}).then(i,s)}l((a=a.apply(e,r||[])).next())})},a=this&&this.__generator||function(t,e){function r(t){return function(e){return n([t,e])}}function n(r){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[0,i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],o=0}finally{a=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return{next:r(0),throw:r(1),return:r(2)}},o=r(1),i=r(3),s=r(17),l=r(19),u=r(0),c=r(7),f=r(16),d=r(6),p=l.tileLayers,m=p.mapbox,h=p.mapnik,g=p.osmFrance,y=p.openMapSurfer,v=p.cartoDBNoLabels,b=p.wikimapia,w=u.sfx.Scale,x=u.math.mean,A=u.algorithm.findCycle,k=[{event:"routefrom",text:"Route from here"},{event:"routeto",text:"Route to here"},{event:"clearroute",text:"Clear route"},{event:"showheatmap",text:"Show heatmap",extra:{disabled:!0}}],j=function(){function e(t){this.mediator=new u.Mediator,this.whiskers=new WeakMap,this.platformsOnSVG=new WeakMap,this.config=t,this.makeMap()}return e.prototype.getMap=function(){return this.map},e.prototype.getNetwork=function(){return this.network},e.prototype.makeMap=function(){return n(this,void 0,void 0,function(){var e,r,n,i,f,p,w,x,A,k,j,M,E,L,C=this;return a(this,function(a){switch(a.label){case 0:return e=this.config,document.getElementById("scheme").href=e.url.scheme,r=this.getGraph(),n=c.getLineRules(),i=new t(function(t){return m.once("load",t)}),f=new l.FAQ(e.url.data),e.center=[0,0],p=Object.assign({},e),"1"===o.version[0]&&(p.wheelPxPerZoomLevel=75,p.inertiaMaxSpeed=1500,p.fadeAnimation=!1),this.map=o.map(e.containerId,p).addControl(o.control.scale({imperial:!1})),w=this.map.getPanes().mapPane.style,w.visibility="hidden",l.addLayerSwitcher(this.map,[m,h,g,y,v,b]),addEventListener("keydown",function(t){t.shiftKey&&t.ctrlKey&&82===t.keyCode&&C.getGraph().then(function(t){return C.resetNetwork(t)})}),this.addContextMenu(),[4,r];case 1:return x=a.sent(),this.network=new s.default(x),A=u.geo.getCenter(this.network.platforms.map(function(t){return t.location})),e.center=[A.lat,A.lng],k=o.latLngBounds(this.network.platforms.map(function(t){return t.location})),this.overlay=new l.SvgOverlay(k).addTo(this.map),j=this.overlay.defs,u.svg.Filters.appendAll(j),M=j.textContent,0===(M||"").length&&alert((L=["Your browser doesn't seem to have capabilities to display some features of the map. Consider using Chrome or Firefox for the best experience."],L.raw=["Your browser doesn't seem to have capabilities to display some features of the map. Consider using Chrome or Firefox for the best experience."],d.tr(L))),[4,n];case 2:return E=a.sent(),this.lineRules=E,this.resetMapView(),this.map.addLayer(m),this.map.on("overlayupdate",function(t){C.redrawNetwork()}),this.initNetwork(),this.map.invalidateSize(!1),this.addMapListeners(),(new l.RoutePlanner).addTo(this),(new l.DistanceMeasure).addTo(this.map),o.Browser.mobile||new l.MapEditor(e.detailedZoom).addTo(this),[4,f.whenAvailable];case 3:return a.sent(),f.addTo(this.map),[4,i];case 4:return a.sent(),u.fixFontRendering(),this.map.on("layeradd layerremove",function(t){return u.fixFontRendering()}),w.visibility="",[2]}})})},e.prototype.subscribe=function(t,e){this.mediator.subscribe(t,e),this.map.once(t,this.mediator.publish)},e.prototype.addContextMenu=function(){this.contextMenu=new l.ContextMenu(k);for(var t=0,e=k;t<e.length;t++){var r=e[t];this.map.on(r.event,this.mediator.publish)}this.contextMenu.addTo(this.map)},e.prototype.addMapListeners=function(){var t=this,e=function(t){var e=t;return f.default.outerEdgeBindings.getKey(e)||f.default.innerEdgeBindings.getKey(e)},r=function(t){return f.default.dummyBindings.getKey(t)},n=this,a=n.map,o=n.contextMenu;a.on("distancemeasureinit",function(t){o.insertItem("measuredistance","Measure distance")}),a.on("clearmeasurements",function(t){o.removeItem("clearmeasurements"),o.insertItem("measuredistance","Measure distance")}),a.on("zoomstart",function(e){t.plate.hide()}),this.subscribe("measuredistance",function(t){o.removeItem("measuredistance"),o.insertItem("clearmeasurements","Clear measurements")}),this.subscribe("platformrename",function(e){var n=r(e.relatedTarget);t.plate.show(u.svg.circleOffset(e.relatedTarget),u.getPlatformNames(n)),l.platformRenameDialog(n)}),this.subscribe("platformmovestart",function(e){t.plate.disabled=!0}),this.subscribe("platformmove",function(t){var e=r(t.relatedTarget);e.location=u.mouseToLatLng(a,t)}),this.subscribe("platformmoveend",function(e){var n=r(e.relatedTarget);t.plate.disabled=!1,t.plate.show(u.svg.circleOffset(e.relatedTarget),u.getPlatformNames(n))}),this.subscribe("platformadd",function(r){console.log(r);var n=r.detail,o=u.mouseToLatLng(a,n),i=new s.Platform((p=["New station"],p.raw=["New station"],d.tr(p)),o,{});if(t.network.platforms.push(i),void 0!==n.relatedTarget){var l=e(n.relatedTarget),c=l.source===i?"target":"source",f=new s.Span(i,l[c],l.routes);l[c]=i,t.network.spans.push(f)}t.overlay.extendBounds(o),t.resetNetwork(JSON.parse(t.network.toJSON()));var p}),this.subscribe("platformdelete",function(e){var n=r(e.relatedTarget);t.network.deletePlatform(n),t.redrawNetwork()}),this.subscribe("spanroutechange",function(r){if(void 0!==r.relatedTarget){var n=e(r.relatedTarget),a=l.askRoutes(t.network,new Set(n.routes));n.routes=Array.from(a),t.resetNetwork(JSON.parse(t.network.toJSON()))}}),this.subscribe("spaninvert",function(r){if(void 0!==r.relatedTarget){var n=e(r.relatedTarget);n.invert(),t.resetNetwork(JSON.parse(t.network.toJSON()))}}),this.subscribe("spanend",function(e){var r=f.default.dummyBindings.getKey(e.detail.source),n=f.default.dummyBindings.getKey(e.detail.target);console.log(r,n),o.removeItem("spanend");var a=r.passingRoutes(),i=n.passingRoutes(),c=a.size,d=i.size,p=c>0&&0===d?1===c?a:l.askRoutes(t.network,a):d>0&&0===c?1===d?i:l.askRoutes(t.network,i):l.askRoutes(t.network,u.intersection(a,i));t.network.spans.push(new s.Span(r,n,Array.from(p))),t.resetNetwork(JSON.parse(t.network.toJSON()))}),this.subscribe("spandelete",function(r){if(void 0!==r.relatedTarget){var n=e(r.relatedTarget);u.deleteFromArray(t.network.spans,n),t.resetNetwork(JSON.parse(t.network.toJSON()))}}),this.subscribe("transferend",function(e){var r=f.default.dummyBindings.getKey(e.detail.source),n=f.default.dummyBindings.getKey(e.detail.target);console.log(r,n),o.removeItem("transferend"),t.network.transfers.push(new s.Transfer(r,n)),t.resetNetwork(JSON.parse(t.network.toJSON()))}),this.subscribe("transferdelete",function(e){if(void 0!==e.relatedTarget){var r=e.relatedTarget,n=f.default.outerEdgeBindings.getKey(r)||f.default.innerEdgeBindings.getKey(r);u.deleteFromArray(t.network.transfers,n),t.resetNetwork(JSON.parse(t.network.toJSON()))}}),this.subscribe("editmapstart",function(e){a.getZoom()<t.config.detailedZoom&&a.setZoom(t.config.detailedZoom);var r=function(t){var e=t.parentElement;if(!e)return!1;var r=e.id;return"paths-outer"===r||"paths-inner"===r};o.insertItem("platformaddclick","New station",function(t){return!r(t)});var n=function(t){var e=t.parentElement;return!!e&&"dummy-circles"===e.id};o.insertItem("platformrename","Rename station",n),o.insertItem("platformdelete","Delete station",n),o.insertItem("spanstart","Span from here",n),o.insertItem("transferstart","Transfer from here",n),o.insertItem("spanroutechange","Change route",r),o.insertItem("spaninvert","Invert span",r),o.insertItem("platformaddtolineclick","Add station to line",r),o.insertItem("spandelete","Delete span",r),o.insertItem("transferdelete","Delete transfer",function(t){var e=t.parentElement;if(!e)return!1;var r=e.id;return"transfers-outer"===r||"transfers-inner"===r})}),this.subscribe("editmapend",function(t){o.removeItem("platformaddclick"),o.removeItem("platformrename"),o.removeItem("platformdelete"),o.removeItem("spanstart"),o.removeItem("transferstart"),o.removeItem("platformaddtolineclick"),o.removeItem("spanroutechange"),o.removeItem("spandelete"),o.removeItem("transferdelete")}),this.subscribe("mapsave",function(e){u.file.downloadText("graph.json",t.network.toJSON())})},e.prototype.initNetwork=function(){for(var t=this.overlay.origin,e=["paths-outer","paths-inner","transfers-outer","station-circles","transfers-inner","dummy-circles"],r=0,n=e;r<n.length;r++){var a=n[r],o=u.svg.createSVGElement("g");o.id=a,t.appendChild(o)}this.plate=new l.TextPlate,t.insertBefore(this.plate.element,document.getElementById("dummy-circles")),this.redrawNetwork(),this.addStationListeners()},e.prototype.resetMapView=function(){var t=this.config,e=t.center,r=t.zoom,n={pan:{animate:!1},zoom:{animate:!1}};return e?(this.map.setView(e,r+1,n),void this.map.setView(e,r,n)):void console.error("cannot set map to center")},e.prototype.getGraph=function(){return c.getJSON(this.config.url.graph)},e.prototype.resetNetwork=function(t){this.network=new s.default(t),this.redrawNetwork()},e.prototype.cleanElements=function(){for(var t=0,e=this.overlay.origin.childNodes;t<e.length;t++){var r=e[t];r!==this.plate.element&&u.removeAllChildren(r)}},e.prototype.addBindings=function(){for(var t=this.network.platforms,e=f.default.platformBindings,r=f.default.dummyBindings,n=0,a=t;n<a.length;n++){var o=a[n];this.platformToModel(o,[u.tryGetFromMap(e,o),u.tryGetFromMap(r,o)])}},e.prototype.redrawNetwork=function(){var t=this;console.time("pre"),this.cleanElements(),this.updatePlatformsPositionOnOverlay(),console.timeEnd("pre"),console.time("preparation");for(var e=this.config.detailedZoom,r=this.map.getZoom(),n=r>9?r:r>8?9.5:9,a=.5*(n-7),o=.75*a,s=n<e?1.25*a:a,l=n<e?.4*s:.6*s,c=2*s,d=.9*a,p=1.25*l,m={"station-circles":l,"dummy-circles":0,"transfers-outer":d+p/2,"transfers-inner":d-p/2,"paths-outer":a,"paths-inner":a/2},h=s+l/2,g=new Map,y=0,v=Object.keys(m);y<v.length;y++){var b=v[y];g.set(b,document.createDocumentFragment()),u.byId(b).style.strokeWidth=m[b]+"px"}var w=u.tryGetFromMap(this.lineRules,"light-rail-path");w.strokeWidth=o+"px";var x=Math.max(.5*(r+10),11),k=i.get(this.plate,"element.firstChild.firstChild.style");k&&(k.fontSize=x+"px");var j=new Map;console.timeEnd("preparation"),console.time("circle preparation");for(var M=u.tryGetFromMap(g,"station-circles"),E=u.tryGetFromMap(g,"dummy-circles"),L=0,C=this.network.stations;L<C.length;L++){for(var _=C[L],S=[],B=0,T=_.platforms;B<T.length;B++){var z=T[B],O=u.tryGetFromMap(this.platformsOnSVG,z);if(r>9){var F=u.svg.makeCircle(O,s);r>=e&&this.colorizePlatformCircle(F,z.passingLines());var N=u.svg.makeCircle(O,c);M.appendChild(F),f.default.platformBindings.set(z,F),E.appendChild(N),f.default.dummyBindings.set(z,N)}this.whiskers.set(z,this.makeWhiskers(z))}var P=A(this.network,_);if(P.length>0){for(var R=0,I=_.platforms;R<I.length;R++){var z=I[R];if(P.includes(z)){var G=u.tryGetFromMap(this.platformsOnSVG,z);S.push(G)}}j.set(_,P)}}if(console.timeEnd("circle preparation"),console.time("transfer preparation"),r>=e)for(var V=u.tryGetFromMap(g,"transfers-outer"),U=u.tryGetFromMap(g,"transfers-inner"),D=this.overlay.defs,X=0,q=this.network.transfers;X<q.length;X++){var Q=q[X],W=Q.source,Y=Q.target,Z=u.tryGetFromMap(this.platformsOnSVG,Q.source),K=u.tryGetFromMap(this.platformsOnSVG,Q.target),H=j.get(W.station),J=void 0!==H&&H.includes(W)&&H.includes(Y)?this.makeTransferArc(Q,H):u.svg.makeTransferLine(Z,K);f.default.outerEdgeBindings.set(Q,J[0]),f.default.innerEdgeBindings.set(Q,J[1]);var $=[W,Y].map(function(e){return t.getPlatformColor(e)}),tt=h/Z.distanceTo(K),et=K.subtract(Z),rt=f.default.gradientBindings.get(Q);void 0===rt?(rt=u.svg.Gradients.makeLinear(et,$,tt),rt.id=u.generateId(function(t){return null!==document.getElementById(t)}),f.default.gradientBindings.set(Q,rt),D.appendChild(rt)):(u.svg.Gradients.setDirection(rt,et),u.svg.Gradients.setOffset(rt,tt)),J[0].style.stroke="url(#"+rt.id+")",V.appendChild(J[0]),U.appendChild(J[1])}console.timeEnd("transfer preparation"),console.time("span preparation");for(var nt=u.tryGetFromMap(g,"paths-outer"),at=u.tryGetFromMap(g,"paths-inner"),ot=0,it=this.network.spans;ot<it.length;ot++){var st=it[ot],lt=this.makePath(st),ut=lt[0],ct=lt[1];nt.appendChild(ut),ct&&at.appendChild(ct)}console.timeEnd("span preparation"),console.time("appending"),g.forEach(function(t,e){return u.byId(e).appendChild(t)}),this.addBindings(),console.timeEnd("appending")},e.prototype.updatePlatformsPositionOnOverlay=function(t){void 0===t&&(t=this.map.getZoom());for(var e=t<this.config.detailedZoom,r=0,n=this.network.stations;r<n.length;r++)for(var a=n[r],o=e?this.overlay.latLngToSvgPoint(a.getCenter()):void 0,i=0,s=a.platforms;i<s.length;i++){var l=s[i],u=o||this.overlay.latLngToSvgPoint(l.location);this.platformsOnSVG.set(l,u)}},e.prototype.getPlatformColor=function(t){return u.color.mean(this.linesToColors(t.passingLines()))},e.prototype.linesToColors=function(t){var e=this,r=[];return t.forEach(function(t){var n=u.tryGetFromMap(e.lineRules,"M"===t[0]?t:t[0]).stroke;n&&r.push(n)}),r},e.prototype.colorizePlatformCircle=function(t,e){if(0!==e.size){if(1===e.size){var r=e.values().next().value;return void t.classList.add("M"===r[0]?r:r[0])}t.style.stroke=u.color.mean(this.linesToColors(e))}},e.prototype.makeWhiskers=function(t){var e=this,r=.5,n=u.tryGetFromMap(this.platformsOnSVG,t),a=new Map,o=t.spans;if(0===o.length)return a;if(1===o.length)return a.set(o[0],n);if(2===o.length){if(2===t.passingLines().size)return a.set(o[0],n).set(o[1],n);for(var i=o.map(function(r){return u.tryGetFromMap(e.platformsOnSVG,r.other(t))}),s=u.math.wings(i[0],n,i[1],1),l=Math.min.apply(Math,i.map(function(t){return n.distanceTo(t)}))*r,c=0;c<2;++c){var f=s[c].multiplyBy(l).add(n);a.set(o[c],f)}return a}for(var d=[[],[]],p=[[],[]],m=new WeakMap,h=0,g=o;h<g.length;h++){var y=g[h],v=y.other(t),b=u.tryGetFromMap(this.platformsOnSVG,v),w=y.source===t?0:1;d[w].push(u.math.normalize(b.subtract(n))),p[w].push(y),m.set(y,n.distanceTo(b))}for(var A=d.map(function(t){return x(t).add(n)}),k=A[0],j=A[1],M=u.math.wings(k,n,j,1),c=0;c<2;++c)for(var E=M[c],L=0,C=p[c];L<C.length;L++){var y=C[L],l=m.get(y)*r,f=E.multiplyBy(l).add(n);a.set(y,f)}return a},e.prototype.makeTransferArc=function(t,e){var r=this,n=t.source,a=t.target,o=u.tryGetFromMap(this.platformsOnSVG,t.source),s=u.tryGetFromMap(this.platformsOnSVG,t.target),l=function(t){return u.svg.makeTransferArc(o,s,u.tryGetFromMap(r.platformsOnSVG,t))};if(3===e.length){var c=i.difference(e,[n,a])[0];return l(c)}if(n===e[2]&&a===e[3]||n===e[3]&&a===e[2])return u.svg.makeTransferLine(o,s);for(var f=[],d=0,p=this.network.transfers;d<p.length;d++){var m=p[d];m!==t&&(t.has(m.source)?f.push(m.target):t.has(m.target)&&f.push(m.source))}var h;if(2===f.length){if(f[0]!==f[1])throw Error("FFFFUC");h=f[0]}else{if(3!==f.length)throw new Error("111FUUFF");h=f[0]===f[1]?f[2]:f[0]===f[2]?f[1]:f[0]}return l(h)},e.prototype.makePath=function(t){var e=t.routes,r="",n="",a="";if(e.length>0){var o=t.routes[0].line.match(/([MEL])(\d{0,2})/);if(!o)throw new Error("match failed for "+t.source.name+"-"+t.target.name);r=o[0],n=o[1],a=o[2]}else console.error(t,"span has no routes!");var i=[u.tryGetFromMap(this.platformsOnSVG,t.source),u.tryGetFromMap(u.tryGetFromMap(this.whiskers,t.source),t),u.tryGetFromMap(u.tryGetFromMap(this.whiskers,t.target),t),u.tryGetFromMap(this.platformsOnSVG,t.target)],s=u.svg.makeCubicBezier(i);if("E"===n){s.classList.add("E");var l=s.cloneNode(!0);return f.default.outerEdgeBindings.set(t,s),f.default.innerEdgeBindings.set(t,l),[s,l]}return void 0!==r&&s.classList.add(r),void 0!==n?s.classList.add(n):s.style.stroke="black",f.default.outerEdgeBindings.set(t,s),[s]},e.prototype.addStationListeners=function(){var t=this,e=function(e){t.plate.hide(),w.unscaleAll()},r=u.byId("dummy-circles");r.addEventListener("mouseover",function(e){var r=e.target,n=f.default.dummyBindings.getKey(r),a=n.station,o=t.map.getZoom()<t.config.detailedZoom&&a.platforms.length>1?a.getNames():u.getPlatformNames(n);t.highlightStation(a,o)}),r.addEventListener("mouseout",e);var n=function(e){var r=e.target,n=f.default.outerEdgeBindings.getKey(r)||f.default.innerEdgeBindings.getKey(r),a=u.getPlatformNamesZipped([n.source,n.target]);t.highlightStation(n.source.station,a)},a=u.byId("transfers-outer"),o=u.byId("transfers-inner");a.addEventListener("mouseover",n),o.addEventListener("mouseover",n),a.addEventListener("mouseout",e),o.addEventListener("mouseout",e)},e.prototype.highlightStation=function(t,e){var r,n,a=1.25;if(1===t.platforms.length)n=t.platforms[0],r=u.tryGetFromMap(f.default.platformBindings,n),w.scaleCircle(r,a,!0);else{var o=this.map.getZoom()<this.config.detailedZoom?void 0:this.network.transfers;w.scaleStation(t,a,o),n=t.platforms.reduce(function(t,e){return t.location.lat<e.location.lat?e:t}),r=u.tryGetFromMap(f.default.platformBindings,n)}this.plate.show(u.svg.circleOffset(r),e)},e.prototype.platformToModel=function(t,e){var r=this,n=t.location;Object.defineProperty(t,"location",{get:function(){return t._location},set:function(n){t._location=n;for(var a=r.map.getZoom()<r.config.detailedZoom?t.station.getCenter():n,o=r.overlay.latLngToSvgPoint(a),i=0,s=e;i<s.length;i++){var l=s[i];l.setAttribute("cx",o.x.toString()),l.setAttribute("cy",o.y.toString())}r.whiskers.set(t,r.makeWhiskers(t)),r.platformsOnSVG.set(t,o);for(var c=new Set(t.spans),d=0,p=t.spans;d<p.length;d++){var m=p[d],h=m.other(t);r.whiskers.set(h,r.makeWhiskers(h)),h.spans.forEach(function(t){return c.add(t)})}c.forEach(function(t){var e=[u.tryGetFromMap(r.platformsOnSVG,t.source),u.tryGetFromMap(u.tryGetFromMap(r.whiskers,t.source),t),u.tryGetFromMap(u.tryGetFromMap(r.whiskers,t.target),t),u.tryGetFromMap(r.platformsOnSVG,t.target)],n=f.default.outerEdgeBindings.get(t),a=f.default.innerEdgeBindings.get(t);u.svg.setBezierPath(n,e),a&&u.svg.setBezierPath(a,e)});for(var g=0,y=t.transfers;g<y.length;g++){var v=y[g];v[v.source===t?"source":"target"]=t}}}),t._location=n},e.prototype.transferToModel=function(t,e){var r=this,n=[t.source,t.target],a=e[0].tagName;["source","target"].forEach(function(o,s){Object.defineProperty(t,o,{get:function(){return t["_"+o]},set:function(n){t["_"+o]=n;var l=u.tryGetFromMap(f.default.platformBindings,n),c=parseFloat(getComputedStyle(l).strokeWidth||""),d=+l.getAttribute("r")/2+c,p=u.tryGetFromMap(r.platformsOnSVG,n);if("line"===a){for(var m=s+1,h=t.other(n),g=0,y=e;g<y.length;g++){var v=y[g];v.setAttribute("x"+m,p.x.toString()),v.setAttribute("y"+m,p.y.toString())}var b=u.tryGetFromMap(f.default.gradientBindings,t),w=u.tryGetFromMap(r.platformsOnSVG,h),x="source"===o?w.subtract(p):p.subtract(w);u.svg.Gradients.setDirection(b,x);var A=d/p.distanceTo(w);u.svg.Gradients.setOffset(b,A)}else{if("path"!==a)throw new TypeError("wrong element type for transfer");for(var k=[],j=0,M=r.network.transfers;j<M.length;j++){var E=M[j];if(t.isAdjacent(E)&&(k.push(E),3===k.length))break}for(var L=new Set,C=0,_=k;C<_.length;C++){var S=_[C];L.add(S.source).add(S.target)}var B=Array.from(L).map(function(t){return r.platformsOnSVG.get(t)});L.forEach(function(t){return B.push(r.platformsOnSVG.get(t))});for(var T=k.map(function(t){return f.default.outerEdgeBindings.get(t)}),z=k.map(function(t){return f.default.innerEdgeBindings.get(t)}),O=0;O<3;++O){var F=k[O],N=T[O],P=z[O],R=u.tryGetFromMap(r.platformsOnSVG,F.source),I=u.tryGetFromMap(r.platformsOnSVG,F.target),G=i.difference(B,[R,I])[0];G&&(u.svg.setCircularPath(N,R,I,G),P.setAttribute("d",N.getAttribute("d")));var b=u.tryGetFromMap(f.default.gradientBindings,F);u.svg.Gradients.setDirection(b,I.subtract(R));var A=d/R.distanceTo(I);u.svg.Gradients.setOffset(b,A)}}}}),t["_"+o]=n[s]})},e}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=j}).call(e,r(2))},,function(t,e,r){var n=r(48);"string"==typeof n&&(n=[[t.i,n,""]]);r(5)(n,{});n.locals&&(t.exports=n.locals)},function(t,e,r){var n=r(49);"string"==typeof n&&(n=[[t.i,n,""]]);r(5)(n,{});n.locals&&(t.exports=n.locals)},function(t,e,r){var n=r(50);"string"==typeof n&&(n=[[t.i,n,""]]);r(5)(n,{});n.locals&&(t.exports=n.locals)},function(t,e,r){var n=r(51);"string"==typeof n&&(n=[[t.i,n,""]]);r(5)(n,{});n.locals&&(t.exports=n.locals)},function(t,e,r){"use strict";var n=function(){function t(t,e,r,n){void 0===r&&(r={}),this.spans=[],this.transfers=[],this.name=t,this.altNames=r,this.location=e,this.elevation=n}return Object.defineProperty(t.prototype,"station",{get:function(){return this._station},enumerable:!0,configurable:!0}),t.prototype.passingRoutes=function(){for(var t=new Set,e=0,r=this.spans;e<r.length;e++)for(var n=r[e],a=0,o=n.routes;a<o.length;a++){var i=o[a];t.add(i)}return t},t.prototype.passingLines=function(){for(var t=new Set,e=0,r=this.spans;e<r.length;e++)for(var n=r[e],a=0,o=n.routes;a<o.length;a++){var i=o[a];t.add(i.line)}return t},t}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},a=r(0),o=r(9),i=function(t){function e(e,r,n){var a=t.call(this,e,r)||this;return e.spans.push(a),r.spans.push(a),a.routes=n,a}return n(e,t),Object.defineProperty(e.prototype,"source",{get:function(){return this._source},set:function(t){void 0!==this._source&&a.deleteFromArray(this._source.spans,this),this._source=t,t.spans.push(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this._target},set:function(t){void 0!==this._target&&a.deleteFromArray(this._target.spans,this),this._target=t,t.spans.push(this)},enumerable:!0,configurable:!0}),e}(o.default);Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,r){"use strict";var n=r(0),a=function(){function t(t){this.platforms=t;for(var e=0,r=t;e<r.length;e++){var n=r[e];n._station=this}}return t.prototype.getNames=function(){return n.getPlatformNamesZipped(this.platforms)},t.prototype.getCenter=function(){return n.geo.getCenter(this.platforms.map(function(t){return t.location}))},t.prototype.passingLines=function(){for(var t=new Set,e=0,r=this.platforms;e<r.length;e++)for(var n=r[e],a=0,o=n.spans;a<o.length;a++)for(var i=o[a],s=0,l=i.routes;s<l.length;s++){var u=l[s];t.add(u.line)}return t},t}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=a},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},a=r(0),o=r(9),i=function(t){function e(e,r){var n=t.call(this,e,r)||this;return e.transfers.push(n),r.transfers.push(n),n}return n(e,t),Object.defineProperty(e.prototype,"source",{get:function(){return this._source},set:function(t){void 0!==this._source&&a.deleteFromArray(this._source.transfers,this),this._source=t,t.transfers.push(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this._target},set:function(t){void 0!==this._target&&a.deleteFromArray(this._target.transfers,this),this._target=t,t.transfers.push(this)},enumerable:!0,configurable:!0}),e}(o.default);Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,r){"use strict";var n=r(1),a=r(3),o=r(0),i=r(6),s=r(60),l=function(){function t(t){console.log("adding context menu"),this.items=t,this.container=document.createElement("div"),this.container.classList.add(s.contextmenu),this.container.addEventListener("contextmenu",function(t){t.preventDefault(),t.target.click()}),console.log("context menu ready")}return t.prototype.addTo=function(t){return this.onAdd(t),this},t.prototype.onAdd=function(t){var e=this;if(this.map=t,void 0===t)throw new Error("cannot add map editor to metro map: leaflet map is missing");var r=t.getPanes().mapPane,a=t.getContainer(),o=function(t){return e.handler(t)},i=function(t){return e.hide()};r.addEventListener("contextmenu",o,!1),a.addEventListener("mousedown",i),a.addEventListener("touchstart",i),n.Browser.mobile||t.on("movestart",i),document.body.appendChild(this.container)},t.prototype.onRemove=function(t){},t.prototype.handler=function(t){var e=this;t.preventDefault(),console.log("target",t.target,t.target.parentNode),o.removeAllChildren(this.container);for(var r=0,n=this.items;r<n.length;r++){var a=n[r];if(void 0===a.trigger||a.trigger(t.target)){var s=document.createElement("div");void 0!==a.extra&&a.extra.disabled?s.setAttribute("disabled",""):s.setAttribute("data-event",a.event),s.textContent=i.translate(a.text),this.container.appendChild(s)}else console.log(a.trigger(t.target))}this.container.onclick=function(r){console.log(r);var n=r.target,a=n.getAttribute("data-event");a&&(e.hide(),e.map.fireEvent(a,{clientX:m,clientY:h,relatedTarget:t.target}))};var l=this.container.getBoundingClientRect(),u=l.width,c=l.height,f=document.documentElement,d=f.clientWidth,p=f.clientHeight,m=t.clientX,h=t.clientY,g=m+u>d?d-u:m,y=h+c>p?h-c:h;this.container.style.transform="translate("+g+"px, "+y+"px)",this.show()},t.prototype.insertItem=function(t,e,r,n,a){var o={event:t,text:e,trigger:r,extra:n};void 0===a||a<0?this.items.push(o):this.items.splice(a,0,o)},t.prototype.removeItem=function(t,e){if(void 0===e&&(e=!1),e)return void a.remove(this.items,function(e){return e.event===t});var r=this.items.findIndex(function(e){return e.event===t});r<0||this.items.splice(r,1)},t.prototype.show=function(){this.container.style.visibility=null,n.Browser.mobile&&this.map.dragging.disable()},t.prototype.hide=function(){this.container.style.visibility="hidden",n.Browser.mobile&&this.map.dragging.enable()},t}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=l},function(t,e,r){"use strict";var n=r(1),a=r(3),o=r(0),i=r(18),s=function(){function t(){var t=this;this.polyline=n.polyline([],{color:"red"}),this.markers=n.featureGroup().on("layeradd layerremove",function(t){return o.fixFontRendering()}),this.dashedLine=n.polyline([],{color:"red",opacity:.5,dashArray:"0,9"}),this.makeMarker=function(e){if(0===e.originalEvent.button){var r=function(e){t.dashedLine.setStyle({opacity:0}),t.updateDistances()},a=n.marker(e.latlng,{draggable:!0}).setIcon(i.RedCircle).bindPopup("").on("mouseover",function(e){return t.hideDashedLine()}).on("mouseout",function(e){return t.showDashedLine()}).on("drag",r).on("click",t.onCircleClick.bind(t));t.markers.addLayer(a),t.updateDistances()}},this.resetDashedLine=function(e){t.dashedLine.getLatLngs()[1]=e.latlng,t.dashedLine.redraw()}}return t.prototype.onAdd=function(t){var e=this;this.map=t;return t.fireEvent("distancemeasureinit"),
t.on("measuredistance",function(r){return e.measureDistance(o.mouseToLatLng(t,r))}),t.on("clearmeasurements",function(t){return e.clearMeasurements()}),this},t.prototype.onRemove=function(t){},t.prototype.addTo=function(t){return this.onAdd(t),this},t.prototype.updateDistances=function(){var t=this.polyline.getLatLngs(),e=this.markers.getLayers(),r=e.length;t[0]=e[0].setPopupContent("0").getLatLng();for(var n=1,o=0;n<r;++n){var i=e[n].getLatLng();t[n]=i,o+=e[n-1].getLatLng().distanceTo(i);var s=Math.round(o),l=s<1e3?s+" m":(s<1e4?s/1e3:Math.round(s/10)/100)+" km";e[n].setPopupContent(l)}t.length>r&&(t.length=r),this.dashedLine.getLatLngs()[0]=a.last(t),this.polyline.redraw(),r>1&&a.last(e).openPopup()},t.prototype.showDashedLine=function(){this.dashedLine.setStyle({opacity:.5})},t.prototype.hideDashedLine=function(){this.dashedLine.setStyle({opacity:0})},t.prototype.onCircleClick=function(t){if(0===t.originalEvent.button){if(this.markers.removeLayer(t.target),0===this.markers.getLayers().length)return void this.map.fire("clearmeasurements");this.updateDistances(),this.map.hasLayer(this.dashedLine)||this.showDashedLine()}},t.prototype.measureDistance=function(t){var e=this;this.dashedLine.addLatLng(t).addLatLng(t),this.map.addLayer(this.polyline.setLatLngs([])).addLayer(this.markers).addLayer(this.dashedLine.setLatLngs([])).on("click",this.makeMarker).on("mousemove",this.resetDashedLine).fire("click",{latlng:t,originalEvent:{button:0}}),o.onceEscapePress(function(t){return e.map.fire("clearmeasurements")})},t.prototype.clearMeasurements=function(){this.map.removeLayer(this.polyline).removeLayer(this.markers.clearLayers()).removeLayer(this.dashedLine).off("mousemove",this.resetDashedLine).off("click",this.makeMarker)},t}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=s},function(t,e,r){"use strict";(function(t){var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},a=r(1),o=r(15),i=r(40),s=r(0),l=r(61),u=function(e){function r(r){var n=e.call(this)||this,i=t(r).then(function(t){return t.json()}),s=document.createElement("button");s.textContent="FAQ",s.classList.add("leaflet-control"),s.classList.add(l["faq-button"]),s.addEventListener("click",function(t){return n.showFAQ()}),n.button=s,n.card=document.createElement("div"),n.card.classList.add(l["faq-card"]),a.Browser.mobile&&new o(n.card).on("swipeleft swiperight",function(t){return n.hideFAQ()});var u=/\[\[(.+?)\|(.*?)\]\]/g,c='<a href="$1" target="_blank">$2</a>',f=l.question,d=l.answer,p=function(t){return'\n            <div>\n                <span class="'+f+'">'+t.q+'</span>\n                <span class="'+d+'">'+t.a+"</span>\n            </div>\n        "};return n._whenAvailable=i.then(function(t){n.card.innerHTML+=t.faq.map(p).join("").replace(u,c)}),n}return n(r,e),r.prototype.addTo=function(t){var e=this;this.map=t,this.whenAvailable.then(function(t){var r=document.querySelector(".leaflet-right.leaflet-top");return document.body.appendChild(e.card),r?void r.appendChild(e.button):void console.error("cannot append to .leaflet-right.leaflet-top")})},r.prototype.showFAQ=function(){var t=this,e=this,r=e.card,n=e.map,o=e.button,i=this.card.style;i.display="inline",i.transform="scale(0.1)",i.opacity="0",r.getBoundingClientRect(),i.transform=null,i.opacity=null,o.disabled=!0,a.Browser.mobile||(n.getContainer().classList.add("dimmed"),n.once("mousedown",function(e){return t.hideFAQ()}),s.once(window,"keydown").then(function(t){27===t.keyCode&&n.fireEvent("mousedown")}))},r.prototype.hideFAQ=function(){var t=this,e=t.card,r=t.map,n=t.button;e.getBoundingClientRect(),e.style.transform="scale(0.1)",e.style.opacity="0",a.Browser.mobile||r.getContainer().classList.remove("dimmed"),s.transitionEnd(e).then(function(t){return e.style.display=null}),n.disabled=!1},r}(i.DeferredWidget);Object.defineProperty(e,"__esModule",{value:!0}),e.default=u}).call(e,r(20))},function(t,e,r){"use strict";var n=r(0),a=n.svg.createSVGElement("svg");a.setAttribute("width","100"),a.setAttribute("height","100");var o=n.svg.makeCircle(L.point(50,50),40);o.style.stroke="red",o.style.strokeWidth="20px",o.style.fill="white",a.appendChild(o);var i=5;Object.defineProperty(e,"__esModule",{value:!0}),e.default=L.icon({iconUrl:n.file.svgToDataUrl(a),iconSize:[2*i,2*i],iconAnchor:[i,i],popupAnchor:[0,-i]})},function(t,e,r){"use strict";var n=r(6),a=r(0),o=r(62),i=function(){function t(t){var e=this,r=document.createElement("button");r.textContent="Edit Map",r.classList.add("leaflet-control"),r.classList.add(o["edit-map-button"]),r.onclick=function(t){return e.editMapClick()},this.button=r}return Object.defineProperty(t.prototype,"editMode",{get:function(){return this._editMode},set:function(t){var e=this;if(t){var r=a.byId("dummy-circles");this.button.textContent=(o=["Save map"],o.raw=["Save map"],n.tr(o)),this.button.onclick=function(t){return e.saveMapClick()},r.onmousedown=r.onclick=function(){return!1},this.metroMap.mediator.publish(new Event("editmapstart"))}else this.button.textContent=(i=["Edit map"],i.raw=["Edit map"],n.tr(i)),this.button.onclick=function(t){return e.editMapClick()},this.metroMap.mediator.publish(new Event("editmapend"));this._editMode=t;var o,i},enumerable:!0,configurable:!0}),t.prototype.addTo=function(t){var e=t.getMap();if(void 0===e)throw new Error("cannot add map editor to metro map: map is missing");this.metroMap=t;var r=document.querySelector(".leaflet-right.leaflet-top");return r?(r.appendChild(this.button),this.editMode=!1):console.error("cannot append to .leaflet-right.leaflet-top"),this},t.prototype.editMapClick=function(){this.editMode=!0,this.addMapListeners()},t.prototype.saveMapClick=function(){this.metroMap.mediator.publish(new Event("mapsave")),this.editMode=!1},t.prototype.addMapListeners=function(){console.log("adding edit map listeners");var t,e,r,n=this.metroMap.getMap(),o=a.byId("dummy-circles"),i=(a.byId("paths-outer"),a.byId("paths-inner"),this.metroMap.mediator);o.addEventListener("mousedown",function(a){if(2!==a.button&&r){var o={source:r,target:a.target};console.log(o),i.publish(new CustomEvent("span"===e?"spanend":"transferend",{detail:o})),r=null,e=void 0}else 0===a.button?(n.dragging.disable(),t=a.target,i.publish(new MouseEvent("platformmovestart",{relatedTarget:a.target}))):1===a.button&&(console.log("foo",a.target),i.publish(new MouseEvent("spanstart",{relatedTarget:a.target})))}),n.on("mousemove",function(e){if(t){var r=e.originalEvent,n=r.clientX,a=r.clientY,o={relatedTarget:t,clientX:n,clientY:a};i.publish(new MouseEvent("platformmove",o))}}).on("mouseup",function(e){if(t){n.dragging.enable();var r={relatedTarget:t};i.publish(new MouseEvent("platformmoveend",r)),t=null}}),this.metroMap.subscribe("spanstart",function(t){e="span",r=t.relatedTarget}),this.metroMap.subscribe("transferstart",function(t){e="transfer",r=t.relatedTarget}),this.metroMap.subscribe("platformaddclick",function(t){var e=t.clientX,r=t.clientY;i.publish(new CustomEvent("platformadd",{detail:{clientX:e,clientY:r}}))}),this.metroMap.subscribe("platformaddtolineclick",function(t){i.publish(new CustomEvent("platformadd",{detail:t}))})},t}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,r){"use strict";var n=r(1),a=r(8),o=r(0),i=r(19),s=o.sfx,l=o.algorithm.shortestRoute,u=function(){function t(){var t=this;this.onFromTo=function(e){var r=t.metroMap.getMap(),n=o.mouseToLatLng(r,e),a="routefrom"===e.type?t.fromMarker:t.toMarker;a.setLatLng(n),r.hasLayer(a)||r.addLayer(a);var i=a===t.fromMarker?t.toMarker:t.fromMarker;r.hasLayer(i)&&(o.fixFontRendering(),t.visualizeRouteBetween(t.fromMarker.getLatLng(),t.toMarker.getLatLng()))},this.clearRoute=function(){var e=t.metroMap.getMap(),r=s.Animation.terminateAnimations();e.removeLayer(t.fromMarker).removeLayer(t.toMarker),t.fromMarker.off("drag").off("dragend"),t.toMarker.off("drag").off("dragend"),a.dismissAll(),r.then(o.resetStyle)},this.fromMarker=n.marker([0,0],{draggable:!0,icon:i.Icons.start}),this.toMarker=n.marker([0,0],{draggable:!0,icon:i.Icons.end}),this.addMarkerListeners()}return t.prototype.addTo=function(t){this.metroMap=t;var e=t.mediator,r=t.getMap(),n=r.getCenter();return this.fromMarker.setLatLng(n),this.toMarker.setLatLng(n),i.cacheIcons(r,[this.fromMarker,this.toMarker]),e.subscribe("routefrom",this.onFromTo),e.subscribe("routeto",this.onFromTo),e.subscribe("clearroute",this.clearRoute),r.on("zoomstart",s.Animation.terminateAnimations),addEventListener("keydown",function(t){27===t.keyCode&&e.publish(new Event("clearroute"))}),this},t.prototype.addMarkerListeners=function(){for(var t=this,e=0,r=[this.fromMarker,this.toMarker];e<r.length;e++){var n=r[e];n.on("drag",function(e){return t.visualizeShortestRoute(!1)}).on("dragend",function(e){o.fixFontRendering(),t.visualizeShortestRoute()})}},t.prototype.visualizeShortestRoute=function(t){void 0===t&&(t=!0);var e=this.metroMap.getMap();e.hasLayer(this.fromMarker)&&e.hasLayer(this.toMarker)&&this.visualizeRouteBetween(this.fromMarker.getLatLng(),this.toMarker.getLatLng(),t)},t.prototype.visualizeRouteBetween=function(t,e,r){void 0===r&&(r=!0),o.resetStyle(),a.dismissAll(),s.visualizeRoute(l(this.metroMap.getNetwork().platforms,t,e),r)},t}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=u},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},a=r(1),o=r(39),i=r(12),s=r(63),l=function(t){function e(e,r){void 0===r&&(r=a.point(100,100));var n=t.call(this,e,r)||this;return n.overlayContainer=i.createSVGElement("svg"),n.overlayContainer.classList.add(s.overlay),n.defs=i.createSVGElement("defs"),n.overlayContainer.appendChild(n.defs),n.origin=i.createSVGElement("g"),n.origin.id="origin",n.origin.setAttribute("transform","translate("+n.margin.x+", "+n.margin.y+")"),n.overlayContainer.appendChild(n.origin),n}return n(e,t),e}(o.default);Object.defineProperty(e,"__esModule",{value:!0}),e.default=l},function(t,e,r){"use strict";var n=r(0),a=r(64),o=function(){function t(){this.element=n.svg.createSVGElement("g"),this._disabled=!1,this._editable=!1;var t=document.createElement("div");t.classList.add(a["plate-box"]);var e=n.svg.createSVGElement("foreignObject");e.setAttribute("x","0"),e.setAttribute("y","0"),e.setAttribute("width","100%"),e.setAttribute("height","100%"),e.appendChild(t);var r=this.element;r.id="station-plate",r.style.display="none",r.appendChild(e)}return Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled},set:function(t){t?this.hide():getSelection().removeAllRanges(),this._disabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editable",{get:function(){return this._editable},set:function(t){for(var e=t?"true":"false",r=this.element.childNodes[1].children[1],n=r.children,a=0,o=n;a<o.length;a++){var i=o[a];i.contentEditable=e}},enumerable:!0,configurable:!0}),t.prototype.show=function(t,e){if(!this.disabled&&"none"===this.element.style.display){var r=this.element.firstChild,n=r.firstChild;n.innerHTML=e.join("<br>"),this.element.setAttribute("transform","translate("+t.x+", "+t.y+")"),this.element.style.display=null;var a=n.getBoundingClientRect(),o=a.width,i=a.height;r.setAttribute("transform","translate("+-o+", "+-i+")"),console.log(r.getBoundingClientRect()),console.log(n.getBoundingClientRect())}},t.prototype.hide=function(){this.element.style.display="none"},t}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=o},function(t,e,r){"use strict";function n(t,e){void 0===e&&(e=250),setTimeout(function(){return o.fixFontRendering(t)},e)}var a=r(1),o=r(0),i=function(){function t(t,e){void 0===e&&(e=a.point(100,100)),this.margin=e.round(),this.bounds=t}return t.prototype.addTo=function(t){return this.onAdd(t),this},t.prototype.onAdd=function(t){this.map=t,this.minZoom=t.getMinZoom(),this.maxZoom=t.getMaxZoom(),this.updateOverlayPositioning();var e=t.getPanes(),r=e.objectsPane,n=e.markerPane,o=e.mapPane;("1"===a.version[0]?o:r).insertBefore(this.overlayContainer,n),this.addMapMovementListeners()},t.prototype.onRemove=function(t){var e=t.getPanes(),r=e.objectsPane,n=e.mapPane;("1"===a.version[0]?n:r).removeChild(this.overlayContainer),this.map.clearAllEventListeners()},t.prototype.addMapMovementListeners=function(){var t,e=this,r=this.map,i=r.getPanes(),s=i.mapPane,l=i.tilePane,u=i.overlayPane,c=this.overlayContainer,f=c.style,d=c.classList;r.on("zoomstart",function(t){d.add("leaflet-zoom-animated"),console.log("zoomstart",t),r.dragging.disable()}).on("zoomanim",function(r){console.log("zoomanim",r);var n=r,a=n.scale,i=n.origin;1!==a&&o.scaleOverlay(e.overlayContainer,a,t||i),t=null}).on("zoomend",function(t){console.log("zoomend",t),d.remove("leaflet-zoom-animated"),f.transform=null,f.transformOrigin=null,e.updateOverlayPositioning(),r.fireEvent("overlayupdate",e),r.dragging.enable()}).on("moveend",function(t){o.fixFontRendering(),"1"===a.version[0]?n(l.firstElementChild):u.hasChildNodes()&&n(u,0)});var p=function(e){return t=a.DomEvent.getMousePosition(e)};s.addEventListener("wheel",p);var m=document.querySelector(".leaflet-control-container");m?m.addEventListener("wheel",p):console.error("cannot append wheel to leaflet-control-container"),r.zoomControl.getContainer().addEventListener("mousedown",function(e){return t=a.point(innerWidth/2,innerHeight/2).round()},!0),r.on("dblclick",function(e){return t=a.DomEvent.getMousePosition(e.originalEvent)}),document.addEventListener("keydown",function(e){return t=a.point(innerWidth/2,innerHeight/2)})},t.prototype.updateOverlayPositioning=function(){var t=this.bounds.getNorthWest(),e=this.bounds.getSouthEast(),r=this,n=r.map,o=r.margin;this.topLeft=n.project(t).round();var i=a.bounds(n.latLngToLayerPoint(t),n.latLngToLayerPoint(e)),s=this.overlayContainer.style,l=i.min.subtract(o);s.left=l.x+"px",s.top=l.y+"px";var u=i.getSize().add(o).add(o);s.width=u.x+"px",s.height=u.y+"px"},t.prototype.extendBounds=function(t){this.bounds.extend(t),this.updateOverlayPositioning()},t.prototype.latLngToSvgPoint=function(t){return this.map.project(t).round().subtract(this.topLeft)},t}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,r){"use strict";var n=function(){function t(){}return Object.defineProperty(t.prototype,"whenAvailable",{get:function(){return this._whenAvailable},enumerable:!0,configurable:!0}),t}();e.DeferredWidget=n},function(t,e,r){"use strict";var n=r(1),a=n.Browser.retina&&!n.Browser.mobile;e.mapbox=n.tileLayer("https://{s}.tiles.mapbox.com/v3/inker.mlo91c41/{z}/{x}/{y}"+(a?"@2x":"")+".png",{detectRetina:a,attribution:'Map data &copy; <a href="https://openstreetmap.org">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery  <a href="https://mapbox.com">Mapbox</a>'}),e.mapnik=n.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}),e.osmFrance=n.tileLayer("http://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png",{attribution:'&copy; Openstreetmap France | &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}),e.openMapSurfer=n.tileLayer("http://korona.geog.uni-heidelberg.de/tiles/roads/x={x}&y={y}&z={z}",{attribution:'Imagery from <a href="http://giscience.uni-hd.de/">GIScience Research Group @ University of Heidelberg</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}),e.hyddaBase=n.tileLayer("https://{s}.tile.openstreetmap.se/hydda/base/{z}/{x}/{y}.png",{attribution:'Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data &copy; <a href="http://server.ts.openstreetmap.org/copyright">OpenStreetMap</a>'}),e.esriGrey=n.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ"}),e.cartoDB=n.tileLayer("http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>'}),e.cartoDBNoLabels=n.tileLayer("http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>'}),e.wikimapia=n.tileLayer("http://i{hash}.wikimapia.org/?x={x}&y={y}&zoom={z}",{hash:function(t){return t.x%4+t.y%4*4}})},function(t,e,r){"use strict";var n=function(){function t(){var t=this;this.eventListeners=new Map,this.publish=function(e){console.log("event as seen from the dispatcher",e);var r=e.type,n=t.eventListeners.get(r);if(void 0===n||0===n.length)return console.log("no event listeners registered for",r),!1;for(var a=0,o=n;a<o.length;a++){var i=o[a];i(e)}return!0}}return t.prototype.subscribe=function(t,e){var r=this.eventListeners.get(t);void 0===r?this.eventListeners.set(t,[e]):r.push(e)},t.prototype.unsubscribe=function(t,e){var r=this.eventListeners.get(t);if(void 0!==r){var n=r.indexOf(e);n<0||r.splice(n,1)}},t}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e,r){"use strict";function n(t,e){if(e.platforms.length<3)return[];var r=e.platforms;if(3===r.length){for(var n=function(e){if(2!==t.transfers.filter(function(t){return t.has(e)}).length)return{value:[]}},a=0,o=e.platforms;a<o.length;a++){var i=o[a],l=n(i);if("object"==typeof l)return l.value}return r}if(4===r.length){var u=t.transfers,c=r.map(function(t){return{platform:t,degree:u.filter(function(e){return e.has(t)}).length}}).sort(function(t,e){return t.degree-e.degree}),f=c.map(function(t){return t.degree}),d=c.map(function(t){return t.platform});if(s.isEqual(f,[2,2,3,3]))return d;if(s.isEqual(f,[1,2,2,3]))return d.slice(1)}return[]}function a(t,e,r){for(var n=new Map,a=new Map,i=0,b=t;i<b.length;i++){var w=b[i],x=w.spans.some(function(t){return t.routes[0].line.startsWith("E")}),A=f(e,w.location),k=A/d;n.set(w,k+(x?v:y)),A=f(w.location,r),k=A/d,a.set(w,k)}for(var j=u.findClosestObject(e,t),M=new Set(t),E=new Map,L=function(){var t=1/0;M.forEach(function(e){var r=c.tryGetFromMap(n,e);r<t&&(j=e,t=r)}),M.delete(j);for(var e=[],r=[],a=0,o=j.spans;a<o.length;a++){var i=o[a],s=i.other(j);if(M.has(s)){e.push(s);var u=f(j.location,s.location),b=0,w=i.routes[0].line.startsWith("E")?g:h,x=l.timeToTravel(u,p,m);r.push(x+w+b)}}for(var A=0,k=j.station.platforms;A<k.length;A++){var s=k[A];if(M.has(s)){e.push(s);var L=s.spans.some(function(t){return t.routes[0].line.startsWith("E")}),u=f(j.location,s.location)/2;r.push(u/d+(L?v:y))}}for(var C=0,_=e.length;C<_;++C){var s=e[C],S=n.get(j)+r[C];S<n.get(s)&&(n.set(s,S),E.set(s,j))}};M.size>0;)L();var C=1/0;n.forEach(function(t,e){var r=n.get(e)+a.get(e);r<C&&(C=r,j=e)});var _=f(e,r)/d;if(_<C)return{time:{walkTo:_}};for(var S=[],B=[j],T=E.get(j);void 0!==T&&void 0!==T;T=E.get(j)){for(var z=void 0,O=0,F=j.spans;O<F.length;O++){var N=F[O];if(N.has(T)){z=N;break}}if(void 0===z)for(var P=0,R=j.transfers;P<R.length;P++){var I=R[P];if(I.has(T)){z=I;break}}if(void 0===z){var G=o(T,j),V=G.transfers,U=G.midPlatforms;S.push.apply(S,V.reverse()),B.push.apply(B,U)}else S.push(z);B.push(T),j=T}B.reverse(),S.reverse();var D=a.get(s.last(B)),X=c.tryGetFromMap(n,B[0]);return{platforms:B,edges:S,time:{walkTo:X,metro:C-D-X,walkFrom:D,total:C}}}function o(t,e){if(t.station!==e.station)throw new Error("platforms ("+t.name+" & "+e.name+" must be on the same station");for(var r=t.station,n=r.platforms,a=new Set(n),o=new Map,i=new Map,s=0,l=n;s<l.length;s++){var u=l[s];o.set(u,1/0)}o.set(t,0);for(var d=t,p=function(){var t=1/0;a.forEach(function(e){var r=c.tryGetFromMap(o,e);r<t&&(d=e,t=r)}),a.delete(d);for(var e=d.transfers.map(function(t){return t.other(d)}),r=0,n=e;r<n.length;r++){var s=n[r];if(s&&a.has(s)){var l=f(d.location,s.location),u=o.get(d)+l;u<o.get(s)&&(o.set(s,u),i.set(s,d))}}};a.size>0;)p();var m=[],h=[];d=e;for(var g=function(){var t=i.get(d);if(!t)return"break";var e=d.transfers.find(function(e){return e.has(t)});return e?(m.push(e),d=t,void h.push(d)):(console.error("cannot find transfer node"),"continue")};;){var y=g();if("break"===y)break}return h.pop(),{transfers:m.reverse(),midPlatforms:h.reverse()}}var i=r(1),s=r(3),l=r(11),u=r(10),c=r(0);e.findCycle=n;var f=function(t,e){return i.LatLng.prototype.distanceTo.call(t,e)},d=1,p=20,m=.7,h=25,g=40,y=240,v=360;e.shortestRoute=a},function(t,e,r){"use strict";function n(t){var e=t.match(/[0-9a-f]{1,2}/gi);return e?e.map(function(t){return parseInt(t,16)}):[]}function a(t){var e=t.match(/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i);return e?e.slice(1).map(Number):[]}function o(t){var e=function(t,e){return(e.startsWith("#")?n:a)(e).map(function(e,r){return t[r]+e})},r=t.reduce(e,[0,0,0]).map(function(e){return Math.floor(e/t.length)}),o=r[0],i=r[1],s=r[2];return"rgb("+o+", "+i+", "+s+")"}e.mean=o},function(t,e,r){"use strict";function n(t,e,r){var n=r.value;return r.value=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];console.time(e),n.apply(this,t),console.timeEnd(e)},r}function a(t,e,r){var n=r.value;if(null===n)throw new Error(e+" is not a method");var a=new Map;r.value=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=JSON.stringify(t),o=a.get(r);if(void 0!==o)return o;var i=n.apply(this,t);return a.set(r,i),i}}e.time=n,e.MemoizeWithParameters=a},function(t,e,r){"use strict";(function(t){function n(t,e){var r=document.createElement("a");r.href=e,r.download=t,r.click()}function a(t,e){var r=URL.createObjectURL(e);n(t,r),URL.revokeObjectURL(r)}function o(t,e){a(t,new Blob([e],{type:"octet/stream"}))}function i(t,e,r){s(e,r).then(function(e){return n(t,e)})}function s(t,e){return l(t).then(function(t){return t.toDataURL("image/"+e)})}function l(e){return new t(function(t,r){var n=c(e,!0);n.onload=function(e){var a=document.createElement("canvas");a.width=n.width,a.height=n.height;var o=a.getContext("2d");return o?(o.drawImage(n,0,0),void t(a)):r(new Error("2d context does not exist on canvas"))}})}function u(t){var e=s(t,"png"),r=document.createElement("img");return r.width=parseInt(t.getAttribute("width")||"")||parseInt(t.style.width||""),r.height=parseInt(t.getAttribute("height")||"")||parseInt(t.style.height||""),e.then(function(t){return r.src=t,r})}function c(t,e){void 0===e&&(e=!1),e&&(t=d(t));var r=document.createElement("img");return r.width=parseInt(t.getAttribute("width")||"")||parseInt(t.style.width||""),r.height=parseInt(t.getAttribute("height")||"")||parseInt(t.style.height||""),r.src=f(t),r}function f(t){return"data:image/svg+xml;base64,"+btoa((new XMLSerializer).serializeToString(t))}function d(t){for(var e=t.cloneNode(!0),r=e.querySelectorAll("[id^=dummy]"),n=0,a=r;n<a.length;n++){var o=a[n],i=o.parentNode;i&&i.removeChild(o)}e.style.left=e.style.top="";var s=e.querySelector("#station-plate");if(s){var l=s.parentNode;l&&l.removeChild(s)}var u=document.createElement("style");u.textContent=p.getStyleRulesAsText();var c=e.querySelector("defs");return c&&c.insertBefore(u,c.firstChild),e}var p=r(7);e.download=n,e.downloadBlob=a,e.downloadText=o,e.downloadSvgAsPicture=i,e.svgToPictureDataUrl=s,e.svgToCanvas=l,e.svgToPicture=u,e.svgToImg=c,e.svgToDataUrl=f}).call(e,r(2))},function(t,e,r){"use strict";(function(t){function n(t,e){return void 0===e&&(e=!0),s(this,void 0,void 0,function(){var r,n,i,s,c,f,d,p,m,g,b;return l(this,function(l){switch(l.label){case 0:return r=t.platforms,n=void 0===r?[]:r,i=t.edges,s=t.time,c=h.formatTime(s.walkTo),void 0===i?[2,u.success((g=[""," on foot!"],g.raw=[""," on foot!"],h.tr(g,c)))]:[4,v.terminateAnimations()];case 1:for(l.sent(),f=0,d=document.querySelectorAll(y);f<d.length;f++)p=d[f].style,p.filter=null,p.opacity="0.25";return e?[4,v.animateRoute(n,i,1)]:(a(i),o(n),[2]);case 2:return m=l.sent(),m&&u.message((b=["TIME:<br>"," on foot<br>"," by metro<br>"," on foot<br>TOTAL: ",""],b.raw=["TIME:<br>"," on foot<br>"," by metro<br>"," on foot<br>TOTAL: ",""],h.tr(b,c,h.formatTime(s.metro),h.formatTime(s.walkFrom),h.formatTime(s.total))),10),[2]}})})}function a(t){for(var e=0,r=t;e<r.length;e++){var n=r[e],a=d.default.outerEdgeBindings.get(n);if(void 0!==a){a.style.opacity=null;var o=d.default.innerEdgeBindings.get(n);void 0!==o&&(o.style.opacity=null),n instanceof p.Span&&m.Filters.applyDrop(a)}}}function o(t){for(var e=0,r=t;e<r.length;e++){var n=r[e],a=d.default.platformBindings.get(n);a&&(a.style.opacity=null)}}var i,s=this&&this.__awaiter||function(e,r,n,a){return new(n||(n=t))(function(t,o){function i(t){try{l(a.next(t))}catch(t){o(t)}}function s(t){try{l(a.throw(t))}catch(t){o(t)}}function l(e){e.done?t(e.value):new n(function(t){t(e.value)}).then(i,s)}l((a=a.apply(e,r||[])).next())})},l=this&&this.__generator||function(t,e){function r(t){return function(e){return n([t,e])}}function n(r){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[0,i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],o=0}finally{a=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return{next:r(0),throw:r(1),return:r(2)}},u=r(8),c=r(1),f=r(3),d=r(16),p=r(17),m=r(12),h=r(6),g=r(0),y=["paths-inner","paths-outer","transfers-inner","transfers-outer","station-circles"].map(function(t){return"#"+t+" *"}).join(", ");!function(t){function e(t,e,r){if(void 0===r&&(r=!1),!r)return void(t.style.transform="scale("+e+")");a.add(t);var n=t.getAttribute("r");n&&t.setAttribute("data-r",n),t.setAttribute("r",(+n*e).toString())}function r(t,r,n){for(var a=parseFloat(g.byId("transfers-outer").style.strokeWidth||""),i=parseFloat(g.byId("transfers-inner").style.strokeWidth||""),s=0,l=t.platforms;s<l.length;s++){var u=l[s],c=g.tryGetFromMap(d.default.platformBindings,u);if(e(c,r,!0),n&&!(t.platforms.length<2))for(var f=0,p=n;f<p.length;f++){var m=p[f];if(m.has(u)){var h=d.default.outerEdgeBindings.get(m),y=d.default.innerEdgeBindings.get(m);o.add(h),o.add(y),h.style.strokeWidth=a*r+"px",y.style.strokeWidth=i*r+"px"}}}}function n(){a.forEach(function(t){var e=t.getAttribute("data-r");null!==e&&t.setAttribute("r",e)}),o.forEach(function(t){return t.style.strokeWidth=null}),o.clear(),a.clear()}var a=new Set,o=new Set;t.scaleCircle=e,t.scaleStation=r,t.unscaleAll=n}(i=e.Scale||(e.Scale={}));var v,b=c.Browser.webkit&&!c.Browser.mobile;!function(e){function r(){return null===p?t.resolve(!0):(c=!1,p)}function n(t,e,r){void 0===r&&(r=!1);var n=m.getLength(t),a=r?-n:n,o=n/e,i=g.transitionEnd(t),s=t.style;return s.transition=null,s.opacity=null,s.strokeDasharray=n+" "+n,s.strokeDashoffset=a.toString(),t.getBoundingClientRect(),s.transition="stroke-dashoffset "+o+"ms linear",s.strokeDashoffset="0",i}function a(e,r,a){return void 0===a&&(a=1),s(this,void 0,void 0,function(){var o,i,s,p,h,y,v,w,x,A,k,j,M;return l(this,function(l){switch(l.label){case 0:o=r.length,i=0,l.label=1;case 1:return i<o?c?(s=g.tryGetFromMap(d.default.platformBindings,e[i]),s.style.opacity=null,b&&u(s,1.5,200),p=r[i],(h=d.default.outerEdgeBindings.get(r[i]))?(y=d.default.innerEdgeBindings.get(r[i]),v=h.cloneNode(!0),w=void 0===y?void 0:y.cloneNode(!0),x=g.byId("paths-outer"),x.appendChild(v),A=g.byId("paths-inner"),w&&A.appendChild(w),m.Filters.applyDrop(v),k=p.source!==e[i],j=[n(v,a,k)],w&&j.push(n(w,a,k)),[4,t.all(j)]):[3,3]):[2,!1]:[3,4];case 2:l.sent(),h.style.opacity=null,"t"!==v.id.charAt(1)&&m.Filters.applyDrop(h),x.removeChild(v),w&&(y.style.opacity=null,A.removeChild(w)),l.label=3;case 3:return++i,[3,1];case 4:return M=g.tryGetFromMap(d.default.platformBindings,f.last(e)),M.style.opacity=null,b&&u(M,3,200),[2,!0]}})})}function o(t,e,r){return void 0===r&&(r=1),p=a(t,e,r).then(function(t){return p=null,c=!0,t})}function u(t,e,r){return s(this,void 0,void 0,function(){var n;return l(this,function(a){switch(a.label){case 0:return t.getBoundingClientRect(),n=t.style,n.transition="transform "+r/2+"ms linear",i.scaleCircle(t,e),[4,g.transitionEnd(t)];case 1:return a.sent(),n.transform="scale(1)",[4,g.transitionEnd(t)];case 2:return a.sent(),n.transition=null,n.transform=null,[2]}})})}var c=!0,p=null;e.terminateAnimations=r,e.animateRoute=o,e.pulsateCircle=u}(v=e.Animation||(e.Animation={})),e.visualizeRoute=n,e.rehighlightEdges=a,e.rehighlightPlatforms=o}).call(e,r(2))},function(t,e,r){e=t.exports=r(4)(),e.push([t.i,'.alertify .ajs-dimmer{margin:0;background-color:#252525;opacity:.5}.alertify .ajs-dimmer,.alertify .ajs-modal{position:fixed;z-index:3;top:0;right:0;bottom:0;left:0;padding:0}.alertify .ajs-modal{overflow-y:auto}.alertify .ajs-dialog{position:relative;margin:5% auto;min-height:110px;max-width:500px;padding:24px 24px 0;outline:0;background-color:#fff}.alertify .ajs-dialog.ajs-capture:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;display:block;z-index:1}.alertify .ajs-reset{position:absolute!important;display:inline!important;width:0!important;height:0!important;opacity:0!important}.alertify .ajs-commands{position:absolute;right:4px;margin:-14px 24px 0 0;z-index:2}.alertify .ajs-commands button{display:none;width:10px;height:10px;margin-left:10px;padding:10px;border:0;background-color:transparent;background-repeat:no-repeat;background-position:50%;cursor:pointer}.alertify .ajs-commands button.ajs-close{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABZ0RVh0Q3JlYXRpb24gVGltZQAwNy8xMy8xNOrZqugAAAAcdEVYdFNvZnR3YXJlAEFkb2JlIEZpcmV3b3JrcyBDUzbovLKMAAAAh0lEQVQYlY2QsQ0EIQwEB9cBAR1CJUaI/gigDnwR6NBL/7/xWLNrZ2b8EwGotVpr7eOitWa1VjugiNB7R1UPrKrWe0dEAHBbXUqxMQbeewDmnHjvyTm7C3zDwAUd9c63YQdUVdu6EAJzzquz7HXvTiklt+H9DQFYaxFjvDqllFyMkbXWvfpXHjJrWFgdBq/hAAAAAElFTkSuQmCC)}.alertify .ajs-commands button.ajs-maximize{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABZ0RVh0Q3JlYXRpb24gVGltZQAwNy8xMy8xNOrZqugAAAAcdEVYdFNvZnR3YXJlAEFkb2JlIEZpcmV3b3JrcyBDUzbovLKMAAAAOUlEQVQYlWP8//8/AzGAhYGBgaG4uBiv6t7eXkYmooxjYGAgWiELsvHYFMCcRX2rSXcjoSBiJDbAAeD+EGu+8BZcAAAAAElFTkSuQmCC)}.alertify .ajs-header{margin:-24px;margin-bottom:0;padding:16px 24px;background-color:#fff}.alertify .ajs-body{min-height:56px}.alertify .ajs-body .ajs-content{padding:16px 24px 16px 16px}.alertify .ajs-footer{padding:4px;margin-left:-24px;margin-right:-24px;min-height:43px;background-color:#fff}.alertify .ajs-footer .ajs-buttons.ajs-primary{text-align:right}.alertify .ajs-footer .ajs-buttons.ajs-primary .ajs-button{margin:4px}.alertify .ajs-footer .ajs-buttons.ajs-auxiliary{float:left;clear:none;text-align:left}.alertify .ajs-footer .ajs-buttons.ajs-auxiliary .ajs-button{margin:4px}.alertify .ajs-footer .ajs-buttons .ajs-button{min-width:88px;min-height:35px}.alertify .ajs-handle{position:absolute;display:none;width:10px;height:10px;right:0;bottom:0;z-index:1;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABZ0RVh0Q3JlYXRpb24gVGltZQAwNy8xMS8xNEDQYmMAAAAcdEVYdFNvZnR3YXJlAEFkb2JlIEZpcmV3b3JrcyBDUzbovLKMAAAAQ0lEQVQYlaXNMQoAIAxD0dT7H657l0KX3iJuUlBUNOsPPCGJm7VDp6ryeMxMuDsAQH7owW3pyn3RS26iKxERMLN3ugOaAkaL3sWVigAAAABJRU5ErkJggg==);-webkit-transform:scaleX(1);transform:scaleX(1);cursor:se-resize}.alertify.ajs-no-overflow .ajs-body .ajs-content{overflow:hidden!important}.alertify.ajs-no-padding.ajs-maximized .ajs-body .ajs-content{left:0;right:0;padding:0}.alertify.ajs-no-padding:not(.ajs-maximized) .ajs-body{margin-left:-24px;margin-right:-24px}.alertify.ajs-no-padding:not(.ajs-maximized) .ajs-body .ajs-content{padding:0}.alertify.ajs-no-padding.ajs-resizable .ajs-body .ajs-content{left:0;right:0}.alertify.ajs-closable .ajs-commands button.ajs-close,.alertify.ajs-maximizable .ajs-commands button.ajs-maximize,.alertify.ajs-maximizable .ajs-commands button.ajs-restore{display:inline-block}.alertify.ajs-maximized .ajs-dialog{width:100%!important;height:100%!important;max-width:none!important;margin:0 auto!important;top:0!important;left:0!important}.alertify.ajs-maximized.ajs-modeless .ajs-modal{position:fixed!important;min-height:100%!important;max-height:none!important;margin:0!important}.alertify.ajs-maximized .ajs-commands button.ajs-maximize{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABZ0RVh0Q3JlYXRpb24gVGltZQAwNy8xMy8xNOrZqugAAAAcdEVYdFNvZnR3YXJlAEFkb2JlIEZpcmV3b3JrcyBDUzbovLKMAAAASklEQVQYlZWQ0QkAMQhDtXRincOZX78KVtrDCwgqJNEoIB3MPLj7lRUROlpyVXGzby6zWuY+kz6tj5sBMTMAyVV3/595RbOh3cAXsww1raeiOcoAAAAASUVORK5CYII=)}.alertify.ajs-maximized .ajs-dialog,.alertify.ajs-resizable .ajs-dialog{padding:0}.alertify.ajs-maximized .ajs-commands,.alertify.ajs-resizable .ajs-commands{margin:14px 24px 0 0}.alertify.ajs-maximized .ajs-header,.alertify.ajs-resizable .ajs-header{position:absolute;top:0;left:0;right:0;margin:0;padding:16px 24px}.alertify.ajs-maximized .ajs-body,.alertify.ajs-resizable .ajs-body{min-height:224px;display:inline-block}.alertify.ajs-maximized .ajs-body .ajs-content,.alertify.ajs-resizable .ajs-body .ajs-content{position:absolute;top:50px;right:24px;bottom:50px;left:24px;overflow:auto}.alertify.ajs-maximized .ajs-footer,.alertify.ajs-resizable .ajs-footer{position:absolute;left:0;right:0;bottom:0;margin:0}.alertify.ajs-resizable:not(.ajs-maximized) .ajs-dialog{min-width:548px}.alertify.ajs-resizable:not(.ajs-maximized) .ajs-handle{display:block}.alertify.ajs-movable:not(.ajs-maximized) .ajs-header{cursor:move}.alertify.ajs-modeless .ajs-dimmer,.alertify.ajs-modeless .ajs-reset{display:none}.alertify.ajs-modeless .ajs-modal{overflow:visible;max-width:none;max-height:0}.alertify.ajs-modeless.ajs-pinnable .ajs-commands button.ajs-pin{display:inline-block;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABZ0RVh0Q3JlYXRpb24gVGltZQAwNy8xMy8xNOrZqugAAAAcdEVYdFNvZnR3YXJlAEFkb2JlIEZpcmV3b3JrcyBDUzbovLKMAAAAQklEQVQYlcWPMQ4AIAwCqU9u38GbcbHRWN1MvKQDhQFMEpKImGJA0gCgnYw0V0rwxseg5erT4oSkQVI5d9f+e9+xA0NbLpWfitPXAAAAAElFTkSuQmCC)}.alertify.ajs-modeless.ajs-unpinned .ajs-modal{position:absolute}.alertify.ajs-modeless.ajs-unpinned .ajs-commands button.ajs-pin{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABZ0RVh0Q3JlYXRpb24gVGltZQAwNy8xMy8xNOrZqugAAAAcdEVYdFNvZnR3YXJlAEFkb2JlIEZpcmV3b3JrcyBDUzbovLKMAAAAO0lEQVQYlWP8//8/AzGAiShV6AqLi4txGs+CLoBLMYbC3t5eRmyaWfBZhwwYkX2NTxPRvibKjRhW4wMAhxkYGbLu3pEAAAAASUVORK5CYII=)}.alertify.ajs-modeless:not(.ajs-unpinned) .ajs-body{max-height:500px;overflow:auto}.alertify.ajs-basic .ajs-header{opacity:0}.alertify.ajs-basic .ajs-footer{visibility:hidden}.alertify.ajs-frameless .ajs-header{position:absolute;top:0;left:0;right:0;min-height:60px;margin:0;padding:0;opacity:0;z-index:1}.alertify.ajs-frameless .ajs-footer{display:none}.alertify.ajs-frameless .ajs-body .ajs-content{position:absolute;top:0;right:0;bottom:0;left:0}.alertify.ajs-frameless:not(.ajs-resizable) .ajs-dialog{padding-top:0}.alertify.ajs-frameless:not(.ajs-resizable) .ajs-dialog .ajs-commands{margin-top:0}.ajs-no-overflow{overflow:hidden!important;outline:none}.ajs-no-overflow.ajs-fixed{position:fixed;top:0;right:0;bottom:0;left:0;overflow-y:scroll!important}.ajs-no-selection,.ajs-no-selection *{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@media screen and (max-width:568px){.alertify .ajs-dialog{min-width:150px}.alertify:not(.ajs-maximized) .ajs-modal{padding:0 5%}.alertify:not(.ajs-maximized).ajs-resizable .ajs-dialog{min-width:0;min-width:auto}}@-moz-document url-prefix(){.alertify button:focus{outline:1px dotted #3593d2}}.alertify .ajs-dimmer,.alertify .ajs-modal{-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-transition-property:opacity,visibility;transition-property:opacity,visibility;-webkit-transition-timing-function:linear;transition-timing-function:linear;-webkit-transition-duration:.25s;transition-duration:.25s}.alertify.ajs-hidden .ajs-dimmer,.alertify.ajs-hidden .ajs-modal{visibility:hidden;opacity:0}.alertify.ajs-in:not(.ajs-hidden) .ajs-dialog{-webkit-animation-duration:.5s;animation-duration:.5s}.alertify.ajs-out.ajs-hidden .ajs-dialog{-webkit-animation-duration:.25s;animation-duration:.25s}.alertify .ajs-dialog.ajs-shake{-webkit-animation-name:a;animation-name:a;-webkit-animation-duration:.1s;animation-duration:.1s;-webkit-animation-fill-mode:both;animation-fill-mode:both}@-webkit-keyframes a{0%,to{-webkit-transform:translateZ(0);transform:translateZ(0)}10%,30%,50%,70%,90%{-webkit-transform:translate3d(-10px,0,0);transform:translate3d(-10px,0,0)}20%,40%,60%,80%{-webkit-transform:translate3d(10px,0,0);transform:translate3d(10px,0,0)}}@keyframes a{0%,to{-webkit-transform:translateZ(0);transform:translateZ(0)}10%,30%,50%,70%,90%{-webkit-transform:translate3d(-10px,0,0);transform:translate3d(-10px,0,0)}20%,40%,60%,80%{-webkit-transform:translate3d(10px,0,0);transform:translate3d(10px,0,0)}}.alertify.ajs-slide.ajs-in:not(.ajs-hidden) .ajs-dialog{-webkit-animation-name:l;animation-name:l;-webkit-animation-timing-function:cubic-bezier(.175,.885,.32,1.275);animation-timing-function:cubic-bezier(.175,.885,.32,1.275)}.alertify.ajs-slide.ajs-out.ajs-hidden .ajs-dialog{-webkit-animation-name:m;animation-name:m;-webkit-animation-timing-function:cubic-bezier(.6,-.28,.735,.045);animation-timing-function:cubic-bezier(.6,-.28,.735,.045)}.alertify.ajs-zoom.ajs-in:not(.ajs-hidden) .ajs-dialog{-webkit-animation-name:d;animation-name:d}.alertify.ajs-zoom.ajs-out.ajs-hidden .ajs-dialog{-webkit-animation-name:e;animation-name:e}.alertify.ajs-fade.ajs-in:not(.ajs-hidden) .ajs-dialog{-webkit-animation-name:f;animation-name:f}.alertify.ajs-fade.ajs-out.ajs-hidden .ajs-dialog{-webkit-animation-name:g;animation-name:g}.alertify.ajs-pulse.ajs-in:not(.ajs-hidden) .ajs-dialog{-webkit-animation-name:b;animation-name:b}.alertify.ajs-pulse.ajs-out.ajs-hidden .ajs-dialog{-webkit-animation-name:c;animation-name:c}.alertify.ajs-flipx.ajs-in:not(.ajs-hidden) .ajs-dialog{-webkit-animation-name:h;animation-name:h}.alertify.ajs-flipx.ajs-out.ajs-hidden .ajs-dialog{-webkit-animation-name:i;animation-name:i}.alertify.ajs-flipy.ajs-in:not(.ajs-hidden) .ajs-dialog{-webkit-animation-name:j;animation-name:j}.alertify.ajs-flipy.ajs-out.ajs-hidden .ajs-dialog{-webkit-animation-name:k;animation-name:k}@-webkit-keyframes b{0%,20%,40%,60%,80%,to{-webkit-transition-timing-function:cubic-bezier(.215,.61,.355,1);transition-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;-webkit-transform:scale3d(.3,.3,.3);transform:scale3d(.3,.3,.3)}20%{-webkit-transform:scale3d(1.1,1.1,1.1);transform:scale3d(1.1,1.1,1.1)}40%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}60%{opacity:1;-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}80%{-webkit-transform:scale3d(.97,.97,.97);transform:scale3d(.97,.97,.97)}to{opacity:1;-webkit-transform:scaleX(1);transform:scaleX(1)}}@keyframes b{0%,20%,40%,60%,80%,to{-webkit-transition-timing-function:cubic-bezier(.215,.61,.355,1);transition-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;-webkit-transform:scale3d(.3,.3,.3);transform:scale3d(.3,.3,.3)}20%{-webkit-transform:scale3d(1.1,1.1,1.1);transform:scale3d(1.1,1.1,1.1)}40%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}60%{opacity:1;-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}80%{-webkit-transform:scale3d(.97,.97,.97);transform:scale3d(.97,.97,.97)}to{opacity:1;-webkit-transform:scaleX(1);transform:scaleX(1)}}@-webkit-keyframes c{20%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}50%,55%{opacity:1;-webkit-transform:scale3d(1.1,1.1,1.1);transform:scale3d(1.1,1.1,1.1)}to{opacity:0;-webkit-transform:scale3d(.3,.3,.3);transform:scale3d(.3,.3,.3)}}@keyframes c{20%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}50%,55%{opacity:1;-webkit-transform:scale3d(1.1,1.1,1.1);transform:scale3d(1.1,1.1,1.1)}to{opacity:0;-webkit-transform:scale3d(.3,.3,.3);transform:scale3d(.3,.3,.3)}}@-webkit-keyframes d{0%{opacity:0;-webkit-transform:scale3d(.25,.25,.25);transform:scale3d(.25,.25,.25)}to{opacity:1;-webkit-transform:scaleX(1);transform:scaleX(1)}}@keyframes d{0%{opacity:0;-webkit-transform:scale3d(.25,.25,.25);transform:scale3d(.25,.25,.25)}to{opacity:1;-webkit-transform:scaleX(1);transform:scaleX(1)}}@-webkit-keyframes e{0%{opacity:1;-webkit-transform:scaleX(1);transform:scaleX(1)}to{opacity:0;-webkit-transform:scale3d(.25,.25,.25);transform:scale3d(.25,.25,.25)}}@keyframes e{0%{opacity:1;-webkit-transform:scaleX(1);transform:scaleX(1)}to{opacity:0;-webkit-transform:scale3d(.25,.25,.25);transform:scale3d(.25,.25,.25)}}@-webkit-keyframes f{0%{opacity:0}to{opacity:1}}@keyframes f{0%{opacity:0}to{opacity:1}}@-webkit-keyframes g{0%{opacity:1}to{opacity:0}}@keyframes g{0%{opacity:1}to{opacity:0}}@-webkit-keyframes h{0%{-webkit-transform:perspective(400px) rotateX(90deg);transform:perspective(400px) rotateX(90deg);-webkit-transition-timing-function:ease-in;transition-timing-function:ease-in;opacity:0}40%{-webkit-transform:perspective(400px) rotateX(-20deg);transform:perspective(400px) rotateX(-20deg);-webkit-transition-timing-function:ease-in;transition-timing-function:ease-in}60%{-webkit-transform:perspective(400px) rotateX(10deg);transform:perspective(400px) rotateX(10deg);opacity:1}80%{-webkit-transform:perspective(400px) rotateX(-5deg);transform:perspective(400px) rotateX(-5deg)}to{-webkit-transform:perspective(400px);transform:perspective(400px)}}@keyframes h{0%{-webkit-transform:perspective(400px) rotateX(90deg);transform:perspective(400px) rotateX(90deg);-webkit-transition-timing-function:ease-in;transition-timing-function:ease-in;opacity:0}40%{-webkit-transform:perspective(400px) rotateX(-20deg);transform:perspective(400px) rotateX(-20deg);-webkit-transition-timing-function:ease-in;transition-timing-function:ease-in}60%{-webkit-transform:perspective(400px) rotateX(10deg);transform:perspective(400px) rotateX(10deg);opacity:1}80%{-webkit-transform:perspective(400px) rotateX(-5deg);transform:perspective(400px) rotateX(-5deg)}to{-webkit-transform:perspective(400px);transform:perspective(400px)}}@-webkit-keyframes i{0%{-webkit-transform:perspective(400px);transform:perspective(400px)}30%{-webkit-transform:perspective(400px) rotateX(-20deg);transform:perspective(400px) rotateX(-20deg);opacity:1}to{-webkit-transform:perspective(400px) rotateX(90deg);transform:perspective(400px) rotateX(90deg);opacity:0}}@keyframes i{0%{-webkit-transform:perspective(400px);transform:perspective(400px)}30%{-webkit-transform:perspective(400px) rotateX(-20deg);transform:perspective(400px) rotateX(-20deg);opacity:1}to{-webkit-transform:perspective(400px) rotateX(90deg);transform:perspective(400px) rotateX(90deg);opacity:0}}@-webkit-keyframes j{0%{-webkit-transform:perspective(400px) rotateY(90deg);transform:perspective(400px) rotateY(90deg);-webkit-transition-timing-function:ease-in;transition-timing-function:ease-in;opacity:0}40%{-webkit-transform:perspective(400px) rotateY(-20deg);transform:perspective(400px) rotateY(-20deg);-webkit-transition-timing-function:ease-in;transition-timing-function:ease-in}60%{-webkit-transform:perspective(400px) rotateY(10deg);transform:perspective(400px) rotateY(10deg);opacity:1}80%{-webkit-transform:perspective(400px) rotateY(-5deg);transform:perspective(400px) rotateY(-5deg)}to{-webkit-transform:perspective(400px);transform:perspective(400px)}}@keyframes j{0%{-webkit-transform:perspective(400px) rotateY(90deg);transform:perspective(400px) rotateY(90deg);-webkit-transition-timing-function:ease-in;transition-timing-function:ease-in;opacity:0}40%{-webkit-transform:perspective(400px) rotateY(-20deg);transform:perspective(400px) rotateY(-20deg);-webkit-transition-timing-function:ease-in;transition-timing-function:ease-in}60%{-webkit-transform:perspective(400px) rotateY(10deg);transform:perspective(400px) rotateY(10deg);opacity:1}80%{-webkit-transform:perspective(400px) rotateY(-5deg);transform:perspective(400px) rotateY(-5deg)}to{-webkit-transform:perspective(400px);transform:perspective(400px)}}@-webkit-keyframes k{0%{-webkit-transform:perspective(400px);transform:perspective(400px)}30%{-webkit-transform:perspective(400px) rotateY(-15deg);transform:perspective(400px) rotateY(-15deg);opacity:1}to{-webkit-transform:perspective(400px) rotateY(90deg);transform:perspective(400px) rotateY(90deg);opacity:0}}@keyframes k{0%{-webkit-transform:perspective(400px);transform:perspective(400px)}30%{-webkit-transform:perspective(400px) rotateY(-15deg);transform:perspective(400px) rotateY(-15deg);opacity:1}to{-webkit-transform:perspective(400px) rotateY(90deg);transform:perspective(400px) rotateY(90deg);opacity:0}}@-webkit-keyframes l{0%{margin-top:-100%}to{margin-top:5%}}@keyframes l{0%{margin-top:-100%}to{margin-top:5%}}@-webkit-keyframes m{0%{margin-top:5%}to{margin-top:-100%}}@keyframes m{0%{margin-top:5%}to{margin-top:-100%}}.alertify-notifier{position:fixed;width:0;overflow:visible;z-index:4}.alertify-notifier,.alertify-notifier .ajs-message{-webkit-transform:translateZ(0);transform:translateZ(0)}.alertify-notifier .ajs-message{position:relative;width:260px;max-height:0;padding:0;opacity:0;margin:0;-webkit-transition-duration:.25s;transition-duration:.25s;-webkit-transition-timing-function:linear;transition-timing-function:linear}.alertify-notifier .ajs-message.ajs-visible{-webkit-transition-duration:.5s;transition-duration:.5s;-webkit-transition-timing-function:cubic-bezier(.175,.885,.32,1.275);transition-timing-function:cubic-bezier(.175,.885,.32,1.275);opacity:1;max-height:100%;padding:15px;margin-top:10px}.alertify-notifier .ajs-message.ajs-success{background:rgba(91,189,114,.95)}.alertify-notifier .ajs-message.ajs-error{background:rgba(217,92,92,.95)}.alertify-notifier .ajs-message.ajs-warning{background:hsla(54,86%,92%,.95)}.alertify-notifier.ajs-top{top:10px}.alertify-notifier.ajs-bottom{bottom:10px}.alertify-notifier.ajs-right{right:10px}.alertify-notifier.ajs-right .ajs-message{right:-320px}.alertify-notifier.ajs-right .ajs-message.ajs-visible{right:290px}.alertify-notifier.ajs-left{left:10px}.alertify-notifier.ajs-left .ajs-message{left:-300px}.alertify-notifier.ajs-left .ajs-message.ajs-visible{left:0}',""]);
},function(t,e,r){e=t.exports=r(4)(),e.push([t.i,".alertify .ajs-dialog{background-color:#fff;box-shadow:0 15px 20px 0 rgba(0,0,0,.25);border-radius:2px}.alertify .ajs-header{color:#000;font-weight:700;background:#fafafa;border-bottom:1px solid #eee;border-radius:2px 2px 0 0}.alertify .ajs-body{color:#000}.alertify .ajs-body .ajs-content .ajs-input{display:block;width:100%;padding:8px;margin:4px;border-radius:2px;border:1px solid #ccc}.alertify .ajs-body .ajs-content p{margin:0}.alertify .ajs-footer{background:#fbfbfb;border-top:1px solid #eee;border-radius:0 0 2px 2px}.alertify .ajs-footer .ajs-buttons .ajs-button{background-color:transparent;color:#000;border:0;font-size:14px;font-weight:700;text-transform:uppercase}.alertify .ajs-footer .ajs-buttons .ajs-button.ajs-ok{color:#3593d2}.alertify-notifier .ajs-message{background:hsla(0,0%,100%,.95);color:#000;text-align:center;border:1px solid #ddd;border-radius:2px}.alertify-notifier .ajs-message.ajs-success{color:#fff;background:rgba(91,189,114,.95);text-shadow:-1px -1px 0 rgba(0,0,0,.5)}.alertify-notifier .ajs-message.ajs-error{color:#fff;background:rgba(217,92,92,.95);text-shadow:-1px -1px 0 rgba(0,0,0,.5)}.alertify-notifier .ajs-message.ajs-warning{background:hsla(54,86%,92%,.95);border-color:#999}",""])},function(t,e,r){e=t.exports=r(4)(),e.push([t.i,".leaflet-image-layer,.leaflet-layer,.leaflet-map-pane,.leaflet-marker-icon,.leaflet-marker-pane,.leaflet-marker-shadow,.leaflet-overlay-pane,.leaflet-overlay-pane svg,.leaflet-popup-pane,.leaflet-shadow-pane,.leaflet-tile,.leaflet-tile-container,.leaflet-tile-pane,.leaflet-zoom-box{position:absolute;left:0;top:0}.leaflet-container{overflow:hidden;-ms-touch-action:none;touch-action:none}.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-tile{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}.leaflet-marker-icon,.leaflet-marker-shadow{display:block}.leaflet-container img{max-width:none!important}.leaflet-container img.leaflet-image-layer{max-width:15000px!important}.leaflet-tile{-webkit-filter:inherit;filter:inherit;visibility:hidden}.leaflet-tile-loaded{visibility:inherit}.leaflet-zoom-box{width:0;height:0}.leaflet-overlay-pane svg{-moz-user-select:none}.leaflet-tile-pane{z-index:1}.leaflet-objects-pane{z-index:2}.leaflet-overlay-pane{z-index:3}.leaflet-shadow-pane{z-index:4}.leaflet-marker-pane{z-index:5}.leaflet-popup-pane{z-index:6}.leaflet-vml-shape{width:1px;height:1px}.lvml{behavior:url(#default#VML);display:inline-block;position:absolute}.leaflet-control{position:relative;z-index:6;pointer-events:auto}.leaflet-bottom,.leaflet-top{position:absolute;z-index:7;pointer-events:none}.leaflet-top{top:0}.leaflet-right{right:0}.leaflet-bottom{bottom:0}.leaflet-left{left:0}.leaflet-control{float:left;clear:both}.leaflet-right .leaflet-control{float:right}.leaflet-top .leaflet-control{margin-top:10px}.leaflet-bottom .leaflet-control{margin-bottom:10px}.leaflet-left .leaflet-control{margin-left:10px}.leaflet-right .leaflet-control{margin-right:10px}.leaflet-fade-anim .leaflet-popup,.leaflet-fade-anim .leaflet-tile{opacity:0;-webkit-transition:opacity .2s linear;transition:opacity .2s linear}.leaflet-fade-anim .leaflet-map-pane .leaflet-popup,.leaflet-fade-anim .leaflet-tile-loaded{opacity:1}.leaflet-zoom-anim .leaflet-zoom-animated{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.25,1);transition:-webkit-transform .25s cubic-bezier(0,0,.25,1);transition:transform .25s cubic-bezier(0,0,.25,1);transition:transform .25s cubic-bezier(0,0,.25,1),-webkit-transform .25s cubic-bezier(0,0,.25,1)}.leaflet-pan-anim .leaflet-tile,.leaflet-touching .leaflet-zoom-animated,.leaflet-zoom-anim .leaflet-tile{-webkit-transition:none;transition:none}.leaflet-zoom-anim .leaflet-zoom-hide{visibility:hidden}.leaflet-clickable{cursor:pointer}.leaflet-container{cursor:-webkit-grab;cursor:-moz-grab}.leaflet-control,.leaflet-popup-pane{cursor:auto}.leaflet-dragging .leaflet-clickable,.leaflet-dragging .leaflet-container{cursor:move;cursor:-webkit-grabbing;cursor:-moz-grabbing}.leaflet-container{background:#ddd;outline:0}.leaflet-container a{color:#0078a8}.leaflet-container a.leaflet-active{outline:2px solid orange}.leaflet-zoom-box{border:2px dotted #38f;background:hsla(0,0%,100%,.5)}.leaflet-container{font:12px/1.5 Helvetica Neue,Arial,Helvetica,sans-serif}.leaflet-bar{box-shadow:0 1px 5px rgba(0,0,0,.65);border-radius:4px}.leaflet-bar a,.leaflet-bar a:hover{background-color:#fff;border-bottom:1px solid #ccc;width:26px;height:26px;line-height:26px;display:block;text-align:center;text-decoration:none;color:#000}.leaflet-bar a,.leaflet-control-layers-toggle{background-position:50% 50%;background-repeat:no-repeat;display:block}.leaflet-bar a:hover{background-color:#f4f4f4}.leaflet-bar a:first-child{border-top-left-radius:4px;border-top-right-radius:4px}.leaflet-bar a:last-child{border-bottom-left-radius:4px;border-bottom-right-radius:4px;border-bottom:none}.leaflet-bar a.leaflet-disabled{cursor:default;background-color:#f4f4f4;color:#bbb}.leaflet-touch .leaflet-bar a{width:30px;height:30px;line-height:30px}.leaflet-control-zoom-in,.leaflet-control-zoom-out{font:700 18px Lucida Console,Monaco,monospace;text-indent:1px}.leaflet-control-zoom-out{font-size:20px}.leaflet-touch .leaflet-control-zoom-in{font-size:22px}.leaflet-touch .leaflet-control-zoom-out{font-size:24px}.leaflet-control-layers{box-shadow:0 1px 5px rgba(0,0,0,.4);background:#fff;border-radius:5px}.leaflet-control-layers-toggle{background-image:url("+r(66)+");width:36px;height:36px}.leaflet-retina .leaflet-control-layers-toggle{background-image:url("+r(65)+');background-size:26px 26px}.leaflet-touch .leaflet-control-layers-toggle{width:44px;height:44px}.leaflet-control-layers-expanded .leaflet-control-layers-toggle,.leaflet-control-layers .leaflet-control-layers-list{display:none}.leaflet-control-layers-expanded .leaflet-control-layers-list{display:block;position:relative}.leaflet-control-layers-expanded{padding:6px 10px 6px 6px;color:#333;background:#fff}.leaflet-control-layers-selector{margin-top:2px;position:relative;top:1px}.leaflet-control-layers label{display:block}.leaflet-control-layers-separator{height:0;border-top:1px solid #ddd;margin:5px -10px 5px -6px}.leaflet-container .leaflet-control-attribution{background:#fff;background:hsla(0,0%,100%,.7);margin:0}.leaflet-control-attribution,.leaflet-control-scale-line{padding:0 5px;color:#333}.leaflet-control-attribution a{text-decoration:none}.leaflet-control-attribution a:hover{text-decoration:underline}.leaflet-container .leaflet-control-attribution,.leaflet-container .leaflet-control-scale{font-size:11px}.leaflet-left .leaflet-control-scale{margin-left:5px}.leaflet-bottom .leaflet-control-scale{margin-bottom:5px}.leaflet-control-scale-line{border:2px solid #777;border-top:none;line-height:1.1;padding:2px 5px 1px;font-size:11px;white-space:nowrap;overflow:hidden;box-sizing:content-box;background:#fff;background:hsla(0,0%,100%,.5)}.leaflet-control-scale-line:not(:first-child){border-top:2px solid #777;border-bottom:none;margin-top:-2px}.leaflet-control-scale-line:not(:first-child):not(:last-child){border-bottom:2px solid #777}.leaflet-touch .leaflet-bar,.leaflet-touch .leaflet-control-attribution,.leaflet-touch .leaflet-control-layers{box-shadow:none}.leaflet-touch .leaflet-bar,.leaflet-touch .leaflet-control-layers{border:2px solid rgba(0,0,0,.2);background-clip:padding-box}.leaflet-popup{position:absolute;text-align:center}.leaflet-popup-content-wrapper{padding:1px;text-align:left;border-radius:12px}.leaflet-popup-content{margin:13px 19px;line-height:1.4}.leaflet-popup-content p{margin:18px 0}.leaflet-popup-tip-container{margin:0 auto;width:40px;height:20px;position:relative;overflow:hidden}.leaflet-popup-tip{width:17px;height:17px;padding:1px;margin:-10px auto 0;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.leaflet-popup-content-wrapper,.leaflet-popup-tip{background:#fff;box-shadow:0 3px 14px rgba(0,0,0,.4)}.leaflet-container a.leaflet-popup-close-button{position:absolute;top:0;right:0;padding:4px 4px 0 0;text-align:center;width:18px;height:14px;font:16px/14px Tahoma,Verdana,sans-serif;color:#c3c3c3;text-decoration:none;font-weight:700;background:transparent}.leaflet-container a.leaflet-popup-close-button:hover{color:#999}.leaflet-popup-scrolled{overflow:auto;border-bottom:1px solid #ddd;border-top:1px solid #ddd}.leaflet-oldie .leaflet-popup-content-wrapper{zoom:1}.leaflet-oldie .leaflet-popup-tip{width:24px;margin:0 auto;-ms-filter:"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)";filter:progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678,M12=0.70710678,M21=-0.70710678,M22=0.70710678)}.leaflet-oldie .leaflet-popup-tip-container{margin-top:-1px}.leaflet-oldie .leaflet-control-layers,.leaflet-oldie .leaflet-control-zoom,.leaflet-oldie .leaflet-popup-content-wrapper,.leaflet-oldie .leaflet-popup-tip{border:1px solid #999}.leaflet-div-icon{background:#fff;border:1px solid #666}',""])},function(t,e,r){e=t.exports=r(4)(),e.push([t.i,"body,html{height:100%}body{margin:0;padding:0}a{color:#2196f3}a:hover{color:#e91e63}#map-container{height:100%;font-size:12px;cursor:default}.leaflet-dragging #map-container{cursor:-webkit-grab;cursor:grab}#map-container.dimmed{-webkit-filter:brightness(.75);filter:brightness(.75);-webkit-transition-property:-webkit-filter -webkit-filter;transition-property:-webkit-filter -webkit-filter;transition-property:filter -webkit-filter;transition-property:filter -webkit-filter,-webkit-filter -webkit-filter;-webkit-transition-duration:.2s;transition-duration:.2s}.leaflet-control-scale-line{opacity:1}.ajs-message{bottom:20px;background-color:#ccc;font-family:Segoe,Tahoma,Ubuntu}@media only screen and (max-device-width:1000px) and (-webkit-min-device-pixel-ratio:2){.leaflet-control-attribution{display:none}}#wait{position:fixed;top:50%;left:50%;font-family:Arial,Helvetica,sans-serif;font-size:1.2em;z-index:1;color:#606060;opacity:0;-webkit-transition:opacity 2s linear;transition:opacity 2s linear}circle{-webkit-transform-origin:50% 50%;transform-origin:50% 50%}@-moz-document url-prefix(){circle{transform-origin:0 0}}button{background-color:#fff;border:none;height:25px;border-radius:2px;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);cursor:pointer;-webkit-transition:box-shadow .1s;transition:box-shadow .1s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;outline-width:0}button:hover{background-color:#f0f0f0}button:active{box-shadow:none}button:disabled{background:#eaeaea;color:#a8a8a8;cursor:auto}",""])},function(t,e,r){e=t.exports=r(4)(),e.push([t.i,".ui-ContextMenu-___style__contextmenu___2-NHv{position:fixed;left:0;top:0;z-index:1;background-color:#fff;box-shadow:0 14px 28px rgba(0,0,0,.25),0 10px 10px rgba(0,0,0,.22);font-family:Segoe UI,Tahoma,Ubuntu,Cambay,Roboto,sans-serif;font-size:.7em;margin-left:1px;border-collapse:collapse;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@media only screen and (max-device-width:400px) and (-webkit-min-device-pixel-ratio:2){.ui-ContextMenu-___style__contextmenu___2-NHv{font-size:1.2em}}.ui-ContextMenu-___style__contextmenu___2-NHv div{padding:5px;cursor:default}.ui-ContextMenu-___style__contextmenu___2-NHv div[disabled]{color:grey}.ui-ContextMenu-___style__contextmenu___2-NHv div:not([disabled]):hover{background-color:#82b1ff}",""]),e.locals={contextmenu:"ui-ContextMenu-___style__contextmenu___2-NHv"}},function(t,e,r){e=t.exports=r(4)(),e.push([t.i,".ui-FAQ-___style__faq-card___2WxV6{position:absolute;top:5%;bottom:5%;right:5%;left:5%;width:50%;margin:0 auto;padding:1%;display:none;background-color:#fff;border-radius:4px;box-shadow:0 19px 38px rgba(0,0,0,.3),0 15px 12px rgba(0,0,0,.22);font-family:Roboto,Calibri,Helvetica,sans-serif;overflow-y:scroll;-webkit-transition-property:-webkit-transform opacity;transition-property:-webkit-transform opacity;transition-property:transform opacity;transition-property:transform opacity,-webkit-transform opacity;-webkit-transition-duration:.2s;transition-duration:.2s}@media only screen and (max-width:1000px){.ui-FAQ-___style__faq-card___2WxV6{max-width:500px;width:90%}}.ui-FAQ-___style__cross-ball___1f_gh{float:right;height:12mm;width:12mm;line-height:12mm;border-radius:50%;background:#e91e63;color:#fff;font-weight:700;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}.ui-FAQ-___style__cross-ball___1f_gh:hover{-webkit-filter:grayscale(.1) opacity(.8);filter:grayscale(.1) opacity(.8)}.ui-FAQ-___style__question___262kz{font-weight:700;display:block;margin-top:1%}.ui-FAQ-___style__answer___1tIjU{display:block;padding-bottom:1%;border-bottom:1px solid #ccc}",""]),e.locals={"faq-card":"ui-FAQ-___style__faq-card___2WxV6","cross-ball":"ui-FAQ-___style__cross-ball___1f_gh",question:"ui-FAQ-___style__question___262kz",answer:"ui-FAQ-___style__answer___1tIjU"}},function(t,e,r){e=t.exports=r(4)(),e.push([t.i,".ui-MapEditor-___style__edit-map-button___12ie8[disabled]{cursor:not-allowed}",""]),e.locals={"edit-map-button":"ui-MapEditor-___style__edit-map-button___12ie8"}},function(t,e,r){e=t.exports=r(4)(),e.push([t.i,".ui-SvgOverlay-___style__overlay___21Ych{width:100%;height:100%;position:relative;z-index:1}",""]),e.locals={overlay:"ui-SvgOverlay-___style__overlay___21Ych"}},function(t,e,r){e=t.exports=r(4)(),e.push([t.i,".ui-TextPlate-___style__plate-box___21m-n{color:#000;text-anchor:end;text-align:right;font-family:Corbel,Candara,Calibri,Trebuchet MS,Ubuntu,sans-serif;font-weight:700;opacity:1;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23);background-color:#fff;padding:1px 3px;line-height:1.3em;display:inline-block}",""]),e.locals={"plate-box":"ui-TextPlate-___style__plate-box___21m-n"}},,,,function(t,e,r){var n=r(52);"string"==typeof n&&(n=[[t.i,n,""]]);r(5)(n,{});n.locals&&(t.exports=n.locals)},function(t,e,r){var n=r(53);"string"==typeof n&&(n=[[t.i,n,""]]);r(5)(n,{});n.locals&&(t.exports=n.locals)},function(t,e,r){var n=r(54);"string"==typeof n&&(n=[[t.i,n,""]]);r(5)(n,{});n.locals&&(t.exports=n.locals)},function(t,e,r){var n=r(55);"string"==typeof n&&(n=[[t.i,n,""]]);r(5)(n,{});n.locals&&(t.exports=n.locals)},function(t,e,r){var n=r(56);"string"==typeof n&&(n=[[t.i,n,""]]);r(5)(n,{});n.locals&&(t.exports=n.locals)},function(t,e){t.exports="data:image/png;base64,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"},function(t,e){t.exports="data:image/png;base64,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"},,function(t,e,r){"use strict";(function(t){var e=this&&this.__awaiter||function(e,r,n,a){return new(n||(n=t))(function(t,o){function i(t){try{l(a.next(t))}catch(t){o(t)}}function s(t){try{l(a.throw(t))}catch(t){o(t)}}function l(e){e.done?t(e.value):new n(function(t){t(e.value)}).then(i,s)}l((a=a.apply(e,r||[])).next())})},n=this&&this.__generator||function(t,e){function r(t){return function(e){return n([t,e])}}function n(r){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[0,i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],o=0}finally{a=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return{next:r(0),throw:r(1),return:r(2)}},a=this,o=r(3),i=r(7),s=r(6),l=r(21);L.Icon.Default.imagePath="http://cdn.leafletjs.com/leaflet/v0.7.7/images",r(25),r(23),r(24),r(26),L.Browser.ie&&alert("Does not work in IE (yet)");var u=location.search.match(/city=(\w+)/),c=u?u[1]:"spb";!function(){return e(a,void 0,void 0,function(){var t,e,r,a,u;return n(this,function(n){switch(n.label){case 0:return[4,i.getConfig()];case 1:for(t=n.sent(),e=s.updateDictionary(t.url.dictionary),r=0,a=Object.keys(t.url);r<a.length;r++)u=a[r],t.url[u]=t.url[u].replace(/\{city\}/g,c);return document.title=s.translate((c&&"spb"!==c?o.capitalize(c):"St Petersburg")+" metro plan proposal"),[4,e];case 2:return n.sent(),document.title=s.translate(document.title),new l.default(t),[2]}})})}()}).call(e,r(2))}],[68]);
//# sourceMappingURL=app.js.map